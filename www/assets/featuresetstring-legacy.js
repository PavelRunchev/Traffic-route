System.register(["./arcadeUtils-legacy.js","./index-legacy.js","./TimeOnly-legacy.js","./ImmutableArray-legacy.js","./number-legacy.js","./featureConversionUtils-legacy.js","./OptimizedGeometry-legacy.js","./OptimizedFeatureSet-legacy.js"],(function(n,e){"use strict";var a,t,r,i,o,c,u,d,s,l,m,y,f,v,w,g,b,p,T;return{setters:[n=>{a=n.a,t=n.H,r=n.$,i=n.d,o=n.B,c=n.a0,u=n.b,d=n.r,s=n.a1,l=n.N,m=n.q,y=n.a2,f=n.a3,v=n.a4,w=n.a5,g=n.a6,b=n.v,p=n.a7,T=n.a8},null,null,null,null,null,null,null],execute:function(){function e(n,e){return n&&n.domain?"coded-value"===n.domain.type||"codedValue"===n.domain.type?l.convertObjectToArcadeDictionary({type:"codedValue",name:n.domain.name,dataType:T[n.field.type],codedValues:n.domain.codedValues.map((n=>({name:n.name,code:n.code})))},m(e)):l.convertObjectToArcadeDictionary({type:"range",name:n.domain.name,dataType:T[n.field.type],min:n.domain.minValue,max:n.domain.maxValue},m(e)):null}n("registerFunctions",(function(n){"async"===n.mode&&(n.functions.domain=function(s,l){return n.standardFunctionAsync(s,l,(async(n,m,y)=>{if(a(y,2,3,s,l),t(y[0]))return e(r(y[0],i(y[1]),void 0===y[2]?void 0:y[2]),s);if(o(y[0]))return await y[0]._ensureLoaded(),e(c(i(y[1]),y[0],null,void 0===y[2]?void 0:y[2]),s);throw new u(s,d.InvalidParameter,l)}))},n.functions.subtypes=function(e,r){return n.standardFunctionAsync(e,r,(async(n,i,c)=>{if(a(c,1,1,e,r),t(c[0])){const n=s(c[0]);return n?l.convertObjectToArcadeDictionary(n,m(e)):null}if(o(c[0])){await c[0]._ensureLoaded();const n=c[0].subtypeMetaData();return n?l.convertObjectToArcadeDictionary(n,m(e)):null}throw new u(e,d.InvalidParameter,r)}))},n.functions.domainname=function(e,r){return n.standardFunctionAsync(e,r,(async(n,s,l)=>{if(a(l,2,4,e,r),t(l[0]))return y(l[0],i(l[1]),l[2],void 0===l[3]?void 0:l[3]);if(o(l[0])){await l[0]._ensureLoaded();const n=c(i(l[1]),l[0],null,void 0===l[3]?void 0:l[3]);return f(n,l[2])}throw new u(e,d.InvalidParameter,r)}))},n.signatures.push({name:"domainname",min:2,max:4}),n.functions.domaincode=function(e,r){return n.standardFunctionAsync(e,r,(async(n,s,l)=>{if(a(l,2,4,e,r),t(l[0]))return v(l[0],i(l[1]),l[2],void 0===l[3]?void 0:l[3]);if(o(l[0])){await l[0]._ensureLoaded();const n=c(i(l[1]),l[0],null,void 0===l[3]?void 0:l[3]);return w(n,l[2])}throw new u(e,d.InvalidParameter,r)}))},n.signatures.push({name:"domaincode",min:2,max:4})),n.functions.text=function(e,t){return n.standardFunctionAsync(e,t,((n,r,i)=>{if(a(i,1,2,e,t),!o(i[0]))return g(i[0],i[1]);{const e=b(i[1],"");if(""===e)return i[0].castToText();if("schema"===e.toLowerCase())return i[0].convertToText("schema",n.abortSignal);if("featureset"===e.toLowerCase())return i[0].convertToText("featureset",n.abortSignal)}}))},n.functions.gdbversion=function(e,r){return n.standardFunctionAsync(e,r,(async(n,i,c)=>{if(a(c,1,1,e,r),t(c[0]))return c[0].gdbVersion();if(o(c[0]))return(await c[0].load()).gdbVersion;throw new u(e,d.InvalidParameter,r)}))},n.functions.schema=function(e,r){return n.standardFunctionAsync(e,r,(async(n,i,c)=>{if(a(c,1,1,e,r),o(c[0]))return await c[0].load(),l.convertObjectToArcadeDictionary(c[0].schema(),m(e));if(t(c[0])){const n=p(c[0]);return n?l.convertObjectToArcadeDictionary(n,m(e)):null}throw new u(e,d.InvalidParameter,r)}))}}))}}}));
