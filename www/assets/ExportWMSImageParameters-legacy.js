System.register(["./index-legacy.js"],(function(e,r){"use strict";var s,t,a,l;return{setters:[e=>{s=e.x,t=e.y,a=e.z,l=e.bm}],execute:function(){const r={visible:"visibleSublayers"};let i=e("a",class extends l{constructor(e){super(e),this.scale=0}set layer(e){this._get("layer")!==e&&(this._set("layer",e),this.removeHandles("layer"),e&&this.addHandles([e.sublayers.on("change",(()=>this.notifyChange("visibleSublayers"))),e.on("wms-sublayer-update",(e=>this.notifyChange(r[e.propertyName])))],"layer"))}get layers(){return this.visibleSublayers.filter((({name:e})=>e)).map((({name:e})=>e)).join()}get version(){this.commitProperty("layers");const e=this.layer;return e&&e.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:e,scale:r}=this,s=e?.sublayers,t=[],a=e=>{const{minScale:s,maxScale:l,sublayers:i,visible:n}=e;n&&(0===r||(0===s||r<=s)&&(0===l||r>=l))&&(i?i.forEach(a):t.push(e))};return s?.forEach(a),t}toJSON(){const{layer:e,layers:r}=this,{imageFormat:s,imageTransparency:t,version:a}=e;return{format:s,request:"GetMap",service:"WMS",styles:"",transparent:t?"TRUE":"FALSE",version:a,layers:r}}});s([t()],i.prototype,"layer",null),s([t({readOnly:!0})],i.prototype,"layers",null),s([t({type:Number})],i.prototype,"scale",void 0),s([t({readOnly:!0})],i.prototype,"version",null),s([t({readOnly:!0})],i.prototype,"visibleSublayers",null),e("a",i=s([a("esri.layers.support.ExportWMSImageParameters")],i))}}}));
