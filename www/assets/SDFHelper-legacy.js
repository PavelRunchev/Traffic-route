System.register(["./floatRGBA-legacy.js","./index-legacy.js","./UpdateTracking2D-legacy.js","./definitions-legacy.js"],(function(t,n){"use strict";var o,r,e,l;return{setters:[t=>{o=t.o},t=>{r=t.Y},t=>{e=t.t},t=>{l=t.$}],execute:function(){function n(t){let n=1/0,o=-1/0,r=1/0,l=-1/0;for(const e of t)for(const t of e)t[0]<n&&(n=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>l&&(l=t[1]);return new e(n,r,o-n,l-r)}function s(t){let n=1/0,o=-1/0,r=1/0,e=-1/0;for(const l of t)for(const t of l)t[0]<n&&(n=t[0]),t[0]>o&&(o=t[0]),t[1]<r&&(r=t[1]),t[1]>e&&(e=t[1]);return[n,r,o,e]}function i(t,n){const r=2*n,e=t.length,l=new Uint8Array(4*e);for(let s=0;s<e;++s){const n=.5-t[s]/r;o(n,l,4*s)}return l}t({a:function(t){const o=function(t){return t?t.rings?t.rings:t.paths?t.paths:void 0!==t.xmin&&void 0!==t.ymin&&void 0!==t.xmax&&void 0!==t.ymax?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:null:null}(t.geom),r=n(o),e=l,s=Math.floor(.5*(64-e)),a=(128-2*(s+e))/Math.max(r.width,r.height),f=Math.round(r.width*a)+2*s,c=Math.round(r.height*a)+2*s,u=[];for(const n of o)if(n&&n.length>1){const o=[];for(const e of n){let[n,l]=e;n-=r.x,l-=r.y,n*=a,l*=a,n+=s-.5,l+=s-.5,t.asFill?o.push([n,l]):o.push([Math.round(n),Math.round(l)])}if(t.asFill){const t=o.length-1;o[0][0]===o[t][0]&&o[0][1]===o[t][1]||o.push(o[0])}u.push(o)}const m=function(t,n,o,r){const e=n*o,l=new Array(e),s=r*r+1;for(let i=0;i<e;++i)l[i]=s;for(const i of t){const t=i.length;for(let e=1;e<t;++e){const t=i[e-1],s=i[e];let a,f,c,u;t[0]<s[0]?(a=t[0],f=s[0]):(a=s[0],f=t[0]),t[1]<s[1]?(c=t[1],u=s[1]):(c=s[1],u=t[1]);let m=Math.floor(a)-r,y=Math.floor(f)+r,h=Math.floor(c)-r,x=Math.floor(u)+r;m<0&&(m=0),y>n&&(y=n),h<0&&(h=0),x>o&&(x=o);const M=s[0]-t[0],g=s[1]-t[1],d=M*M+g*g;for(let r=m;r<y;r++)for(let e=h;e<x;e++){let i,a,f=(r-t[0])*M+(e-t[1])*g;f<0?(i=t[0],a=t[1]):f>d?(i=s[0],a=s[1]):(f/=d,i=t[0]+f*M,a=t[1]+f*g);const c=(r-i)*(r-i)+(e-a)*(e-a),u=(o-e-1)*n+r;c<l[u]&&(l[u]=c)}}}for(let i=0;i<e;++i)l[i]=Math.sqrt(l[i]);return l}(u,f,c,s);return t.asFill&&function(t,n,o,r,e){for(const l of t){const t=l.length;for(let s=1;s<t;++s){const t=l[s-1],i=l[s];let a,f,c,u;t[0]<i[0]?(a=t[0],f=i[0]):(a=i[0],f=t[0]),t[1]<i[1]?(c=t[1],u=i[1]):(c=i[1],u=t[1]);let m=Math.floor(a),y=Math.floor(f)+1,h=Math.floor(c),x=Math.floor(u)+1;m<r&&(m=r),y>n-r&&(y=n-r),h<r&&(h=r),x>o-r&&(x=o-r);for(let l=h;l<x;++l){if(t[1]>l==i[1]>l)continue;const s=(o-l-1)*n;for(let n=m;n<y;++n)n<(i[0]-t[0])*(l-t[1])/(i[1]-t[1])+t[0]&&(e[s+n]=-e[s+n]);for(let t=r;t<m;++t)e[s+t]=-e[s+t]}}}}(u,f,c,s,m),[i(m,s),f,c]},e:function t(n){switch(n.type){case"CIMPointSymbol":{const o=n.symbolLayers;if(!o||1!==o.length)return null;const r=o[0];return"CIMVectorMarker"!==r.type?null:t(r)}case"CIMVectorMarker":{const t=n.markerGraphics;if(!t||1!==t.length)return null;const o=t[0];if(!o)return null;const r=o.geometry;if(!r)return null;const e=o.symbol;return!e||"CIMPolygonSymbol"!==e.type&&"CIMLineSymbol"!==e.type||e.symbolLayers?.some((t=>!!t.effects))?null:{type:"sdf",geom:r,asFill:"CIMPolygonSymbol"===e.type}}}},f:function(t){return t?t.rings?s(t.rings):t.paths?s(t.paths):r(t)?[t.xmin,t.ymin,t.xmax,t.ymax]:null:null},m:function(t,n,o,r,e){const[s,i,a,f]=t;if(a<s||f<i)return[0,0,0,1];const c=a-s,u=f-i,m=l,y=Math.floor(.5*(64-m)),h=(128-2*(y+m))/Math.max(c,u),x=Math.round(c*h)+2*y,M=Math.round(u*h)+2*y;let g=1;n&&(g=M/h/(n.ymax-n.ymin));let d=0,p=0,b=1;r&&(e?n&&o&&n.ymax-n.ymin>0&&(b=(n.xmax-n.xmin)/(n.ymax-n.ymin),d=r.x/(o*b),p=r.y/o):(d=r.x,p=r.y)),n&&(d=.5*(n.xmax+n.xmin)+d*(n.xmax-n.xmin),p=.5*(n.ymax+n.ymin)+p*(n.ymax-n.ymin)),d-=s,p-=i,d*=h,p*=h,d+=y,p+=y;let w=d/x-.5,C=p/M-.5;return e&&o&&(w*=o*b,C*=o),[g,w,C,b]}})}}}));
