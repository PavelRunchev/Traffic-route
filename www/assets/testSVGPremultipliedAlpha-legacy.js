System.register(["./WGLContainer-legacy.js","./Program-legacy.js","./enums-legacy.js","./Texture-legacy.js","./ProgramTemplate-legacy.js","./index-legacy.js"],(function(e,t){"use strict";var r,s,i,n,a,o,E,_,u,T,g,l,c,d;return{setters:[e=>{r=e.m},e=>{s=e.x,i=e.h},e=>{n=e.D,a=e.L,o=e.F,E=e._,_=e.E,u=e.G,T=e.U},e=>{g=e.e,l=e.m},e=>{c=e.o},e=>{d=e.g6}],execute:function(){e("a",(function(e,r){if(r.disjointTimerQuery)return null;let s=e.getExtension("EXT_disjoint_timer_query_webgl2");return s?new t((()=>e.createQuery()),(t=>{e.deleteQuery(t),m=!1}),(t=>e.getQueryParameter(t,e.QUERY_RESULT_AVAILABLE)),(t=>e.getQueryParameter(t,e.QUERY_RESULT)),(()=>e.getParameter(s.GPU_DISJOINT_EXT)),(t=>{m||(m=!0,e.beginQuery(s.TIME_ELAPSED_EXT,t))}),(()=>{e.endQuery(s.TIME_ELAPSED_EXT),m=!1}),(e=>s.queryCounterEXT(e,s.TIMESTAMP_EXT)),(()=>e.getQuery(s.TIMESTAMP_EXT,s.QUERY_COUNTER_BITS_EXT))):(s=e.getExtension("EXT_disjoint_timer_query"),s?new t((()=>s.createQueryEXT()),(e=>{s.deleteQueryEXT(e),m=!1}),(e=>s.getQueryObjectEXT(e,s.QUERY_RESULT_AVAILABLE_EXT)),(e=>s.getQueryObjectEXT(e,s.QUERY_RESULT_EXT)),(()=>e.getParameter(s.GPU_DISJOINT_EXT)),(e=>{m||(m=!0,s.beginQueryEXT(s.TIME_ELAPSED_EXT,e))}),(()=>{s.endQueryEXT(s.TIME_ELAPSED_EXT),m=!1}),(e=>s.queryCounterEXT(e,s.TIMESTAMP_EXT)),(()=>s.getQueryEXT(s.TIMESTAMP_EXT,s.QUERY_COUNTER_BITS_EXT))):null)}));class t{constructor(e,t,r,s,i,n,a,o,E){this.createQuery=e,this.deleteQuery=t,this.resultAvailable=r,this.getResult=s,this.disjoint=i,this.beginTimeElapsed=n,this.endTimeElapsed=a,this.createTimestamp=o,this.timestampBits=E}}let m=!1;class p{constructor(){this._result=!1}dispose(){this._program=d(this._program)}get result(){return null!=this._program&&(this._result=this._test(this._program),this.dispose()),this._result}}e("t",p),e("f",class extends p{constructor(e){super(),this._rctx=e,this._program=e.programCache.acquire("\n    precision highp float;\n\n    attribute vec2 a_pos;\n    varying vec2 v_uv;\n\n    void main() {\n      v_uv = a_pos;\n      gl_Position = vec4(a_pos * 2.0 - 1.0, 0.0, 1.0);\n    }\n    ","\n    precision highp float;\n\n    varying vec2 v_uv;\n\n    uniform sampler2D u_texture;\n\n    void main() {\n      gl_FragColor = texture2D(u_texture, v_uv);\n    }\n    ",new Map([["a_pos",0]]))}dispose(){super.dispose()}_test(e){const t=this._rctx;if(!t.gl)return e.dispose(),!0;const d=new g(1);d.wrapMode=n.CLAMP_TO_EDGE,d.samplingMode=a.NEAREST;const m=new s(t,d),p=i.createVertex(t,o.STATIC_DRAW,new Uint16Array([0,0,1,0,0,1,1,1])),y=new c(t,new Map([["a_pos",0]]),r,{geometry:p}),w=new g;w.samplingMode=a.LINEAR,w.wrapMode=n.CLAMP_TO_EDGE;const A=new l(t,w,h);t.useProgram(e),t.bindTexture(A,0),e.setUniform1i("u_texture",0);const v=t.getBoundFramebufferObject(),{x:X,y:I,width:Q,height:P}=t.getViewport();t.bindFramebuffer(m),t.setViewport(0,0,1,1),t.setClearColor(0,0,0,0),t.setBlendingEnabled(!1),t.clearSafe(E.COLOR_BUFFER_BIT),t.bindVAO(y),t.drawArrays(_.TRIANGLE_STRIP,0,4);const S=new Uint8Array(4);return m.readPixels(0,0,1,1,u.RGBA,T.UNSIGNED_BYTE,S),y.dispose(),m.dispose(),A.dispose(),t.setViewport(X,I,Q,P),t.bindFramebuffer(v),255!==S[0]}});const h=new Image;h.src="data:image/svg+xml,%3C%3Fxml version='1.0' encoding='UTF-8'%3F%3E%3Csvg width='5' height='5' version='1.1' viewBox='0 0 5 5' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='5' height='5' fill='%23f00' fill-opacity='.5'/%3E%3C/svg%3E%0A",h.width=5,h.height=5,h.decode()}}}));
