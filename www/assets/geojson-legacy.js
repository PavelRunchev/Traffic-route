System.register(["./date-legacy.js","./index-legacy.js","./OptimizedGeometry-legacy.js"],(function(e,t){"use strict";var n,o,r,i,s,c,u;return{setters:[e=>{n=e.t},e=>{o=e.s,r=e.aJ,i=e.cD,s=e.cE},e=>{c=e.t,u=e.e}],execute:function(){e({E:function(e,t=4326){if(!e)throw new o("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new o("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:n}=e;if(!n)return;const i="string"==typeof n?n:"name"===n.type?n.properties.name:"EPSG"===n.type?n.properties.code:null,s=r({wkid:t})?new RegExp(".*(CRS84H?|4326)$","i"):new RegExp(`.*(${t})$`,"i");if(!i||!s.test(i))throw new o("geojson:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:n})},I:function(e,t={}){const n=[],o=new Set,r=new Set;let c,u=!1,y=null,p=!1,{geometryType:g=null}=t,h=!1;for(const s of f(e)){const{geometry:e,properties:t,id:f}=s;if((!e||(g||(g=l(e.type)),l(e.type)===g))&&(u||(u=d(a(e))),p||(p=null!=f,p&&(c=typeof f,t&&(y=Object.keys(t).filter((e=>t[e]===f))))),t&&y&&p&&null!=f&&(y.length>1?y=y.filter((e=>t[e]===f)):1===y.length&&(y=t[y[0]]===f?y:[])),!h&&t)){let e=!0;for(const s in t){if(o.has(s))continue;const c=t[s];if(null==c){e=!1,r.add(s);continue}const u=j(c);if("unknown"===u){r.add(s);continue}r.delete(s),o.add(s);const l=i(s);l&&n.push({name:l,alias:s,type:u})}h=e}}const m=i(1===y?.length&&y[0]||null)??void 0;if(m)for(const i of n)if(i.name===m&&s(i)){i.type="esriFieldTypeOID";break}return{fields:n,geometryType:g,hasZ:u,objectIdFieldName:m,objectIdFieldType:c,unknownFields:Array.from(r)}},N:function(e,t){return Array.from(y(f(e),t))},u:l});const t={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function l(e){return t[e]}function*f(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*a(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const e of t)yield*e}}function*y(e,t={}){const{geometryType:n,objectIdField:o}=t;for(const r of e){const{geometry:e,properties:i,id:s}=r;if(e&&l(e.type)!==n)continue;const f=i||{};let a;o&&(a=f[o],null==s||a||(f[o]=a=s));const y=new c(e?h(new u,e,t):null,f,null,a??void 0);yield y}}function d(e){for(const t of e)if(t.length>2)return!0;return!1}function p(e){let t=0;for(let n=0;n<e.length;n++){const o=e[n],r=e[(n+1)%e.length];t+=o[0]*r[1]-r[0]*o[1]}return t<=0}function g(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function h(e,t,n){switch(t.type){case"LineString":case"MultiPoint":return function(e,t,n){return P(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function(e,t,n){for(const o of t.coordinates)P(e,o,n);return e}(e,t,n);case"MultiPolygon":return function(e,t,n){for(const o of t.coordinates){m(e,o[0],n);for(let t=1;t<o.length;t++)w(e,o[t],n)}return e}(e,t,n);case"Point":return function(e,t,n){return b(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function(e,t,n){const o=t.coordinates;m(e,o[0],n);for(let r=1;r<o.length;r++)w(e,o[r],n);return e}(e,t,n)}}function m(e,t,n){const o=g(t);!function(e){return!p(e)}(o)?P(e,o,n):S(e,o,n)}function w(e,t,n){const o=g(t);!function(e){return p(e)}(o)?P(e,o,n):S(e,o,n)}function P(e,t,n){for(const o of t)b(e,o,n);e.lengths.push(t.length)}function S(e,t,n){for(let o=t.length-1;o>=0;o--)b(e,t[o],n);e.lengths.push(t.length)}function b(e,t,n){const[o,r,i]=t;e.coords.push(o,r),n.hasZ&&e.coords.push(i||0)}function j(e){switch(typeof e){case"string":return n(e)?"esriFieldTypeDate":"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}}}}));
