System.register(["./index-legacy.js","./utils-legacy3.js","./utils-legacy5.js"],(function(e,t){"use strict";var n,a,r,s,i,o,l,c,u,m,f,d,h,x;return{setters:[e=>{n=e.bZ,a=e.aa,r=e.ar,s=e.b_,i=e.b$,o=e.c0,l=e.c1,c=e.c2,u=e.bc,m=e.c3,f=e.c4},e=>{d=e.Z},e=>{h=e.c,x=e.B}],execute:function(){e({b:async function(e,n,a=!0){if(!n)return[];const{field:r,field2:s,field3:i,fieldDelimiter:o,fieldInfos:m,timeZone:f}=e,y=r&&m?.find((e=>e.name.toLowerCase()===r.toLowerCase())),g=!!y&&l(y),p=!!y&&d(y),w=e.valueExpression,I=e.normalizationType,M=e.normalizationField,N=e.normalizationTotal,F=[],$=e.viewInfoParams;let v=null,T=null;if(w){if(!t){const{arcadeUtils:e}=await c();t=e}t.hasGeometryOperations(w)&&await t.enableGeometryOperations(),v=t.createFunction(w),T=$?t.getViewInfo({viewingMode:$.viewingMode,scale:$.scale,spatialReference:new u($.spatialReference)}):null}const E=e.fieldInfos,C=n[0]&&"declaredClass"in n[0]&&"esri.Graphic"===n[0].declaredClass||!E?null:{fields:E};return n.forEach((e=>{const n=e.attributes;let l;if(w){const n=C?{...e,layer:C}:e,a=t.createExecContext(n,T,f);l=t.executeFunction(v,a)}else n&&(l=n[r],s?(l=`${h(l)}${o}${h(n[s])}`,i&&(l=`${l}${o}${h(n[i])}`)):"string"==typeof l&&a&&(p?l=l?new Date(l).getTime():null:g&&(l=l?b(l):null)));if(I&&"number"==typeof l&&isFinite(l)){const e=n&&parseFloat(n[M]);l=x(l,I,e,N)}F.push(l)})),F},j:function(e,t,i,o){const l=n(i)?a(i):null,c=l?Math.round((l.valid[1]-l.valid[0])/t.scale[0]):null;return e.map((e=>{const n=new r(e.geometry);return s(t,n,n,n.hasZ,n.hasM),e.geometry=l?function(e,t,n){return e.x<0?e.x+=t:e.x>n&&(e.x-=t),e}(n,c??0,o[0]):n,e}))},w:b,x:function(e,t=18,n,a,r){const s=new Float64Array(a*r);t=Math.round(m(t));let o=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY;const c=f(n);for(const{geometry:u,attributes:m}of e){const{x:e,y:n}=u,f=Math.max(0,e-t),d=Math.max(0,n-t),h=Math.min(r,n+t),x=Math.min(a,e+t),y=+c(m);for(let r=d;r<h;r++)for(let c=f;c<x;c++){const u=r*a+c,m=i(c-e,r-n,t)*y,f=s[u]+=m;o=Math.min(o,f),l=Math.max(l,f)}}return{min:o,max:l}}});let t=null;const y=/^(?<hh>([0-1][0-9])|([2][0-3])):(?<mm>[0-5][0-9])(:(?<ss>[0-5][0-9]))?([.](?<ms>\d+))?$/;function b(e){const t=y.exec(e);if(!t)return null;const{hh:n,mm:a,ss:r,ms:s}=t.groups;return Number(n)*o.hours+Number(a)*o.minutes+Number(r)*o.seconds+Number(s||0)}}}}));
