System.register(["./index-legacy.js","./PooledRBush-legacy.js","./meshVertexSpaceUtils-legacy.js","./georeference-legacy.js","./MeshLocalVertexSpace-legacy.js","./vec3-legacy.js","./mat3f64-legacy.js","./mat4f64-legacy.js","./computeTranslationToOriginAndRotation-legacy.js","./DoubleArray-legacy.js","./quat-legacy.js","./quatf64-legacy.js","./BufferView-legacy.js"],(function(e,t){"use strict";var n,r,a,s;return{setters:[e=>{n=e.ai},e=>{r=e.s},e=>{a=e.g},e=>{s=e.P},null,null,null,null,null,null,null,null,null],execute:function(){function t(e,t,n,r){return{minX:Math.min(e[t],e[n],e[r]),maxX:Math.max(e[t],e[n],e[r]),minY:Math.min(e[t+1],e[n+1],e[r+1]),maxY:Math.max(e[t+1],e[n+1],e[r+1]),p0:[e[t],e[t+1],e[t+2]],p1:[e[n],e[n+1],e[n+2]],p2:[e[r],e[r+1],e[r+2]]}}e("default",class{async createIndex(e,t){const n=new Array;if(!e.vertexAttributes?.position)return new r;const a=this._createMeshData(e),s=null!=t?await t.invoke("createIndexThread",a,{transferList:n}):this.createIndexThread(a).result;return this._createPooledRBush().fromJSON(s)}createIndexThread(e){const t=new Float64Array(e.position),n=this._createPooledRBush();return e.components?this._createIndexComponentsThread(n,t,e.components.map((e=>new Uint32Array(e)))):this._createIndexAllThread(n,t)}_createIndexAllThread(e,n){const r=new Array(n.length/9);let a=0;for(let s=0;s<n.length;s+=9)r[a++]=t(n,s,s+3,s+6);return e.load(r),{result:e.toJSON()}}_createIndexComponentsThread(e,n,r){let a=0;for(const t of r)a+=t.length/3;const s=new Array(a);let o=0;for(const l of r)for(let e=0;e<l.length;e+=3)s[o++]=t(n,3*l[e],3*l[e+1],3*l[e+2]);return e.load(s),{result:e.toJSON()}}_createMeshData(e){const t=(a(e.vertexSpace)?s({position:e.vertexAttributes.position,normal:null,tangent:null},e.vertexSpace,e.transform,e.spatialReference).position:e.vertexAttributes.position).buffer;return!e.components||e.components.some((e=>!e.faces))?{position:t}:{position:t,components:e.components.map((e=>e.faces))}}_createPooledRBush(){return new r(9,n("esri-csp-restrictions")?e=>e:[".minX",".minY",".maxX",".maxY"])}})}}}));
