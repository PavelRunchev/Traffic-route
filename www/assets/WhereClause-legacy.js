System.register(["./TimeOnly-legacy.js","./index-legacy.js"],(function(e,t){"use strict";var r,n,a,i,o,s,u,l,c,f,d,p;return{setters:[e=>{r=e.a,n=e.n,a=e.m},e=>{i=e.fB,o=e.hx,s=e.hz,u=e.hy,l=e.jE,c=e.jF,f=e.bJ,d=e.ai,p=e.hA}],execute:function(){var t;e("t",t),function(e){e.InvalidFunctionParameters="InvalidFunctionParameters",e.InvalidValueForAggregateFunction="InvalidValueForAggregateFunction",e.UnsupportedSqlFunction="UnsupportedSqlFunction",e.UnsupportedOperator="UnsupportedOperator",e.UnsupportedSyntax="UnsupportedSyntax",e.UnsupportedIsRhs="UnsupportedIsRhs",e.UnsupportedIsLhs="UnsupportedIsLhs",e.InvalidDataType="InvalidDataType",e.CannotCastValue="CannotCastValue",e.FunctionNotRecognized="FunctionNotRecognized",e.InvalidTime="InvalidTime",e.InvalidParameterCount="InvalidParameterCount",e.InvalidTimeStamp="InvalidTimeStamp",e.InvalidDate="InvalidDate",e.InvalidOperator="InvalidOperator",e.IllegalInterval="IllegalInterval",e.YearMonthIntervals="YearMonthIntervals",e.PrimarySecondaryQualifiers="PrimarySecondaryQualifiers",e.MissingStatisticParameters="MissingStatisticParameters"}(t||e("t",t={}));const v={[t.InvalidValueForAggregateFunction]:"Invalid value used in aggregate function",[t.MissingStatisticParameters]:"Statistic does not have 1 or 0 Parameters",[t.InvalidFunctionParameters]:"Invalid parameters for call to {function}",[t.UnsupportedIsLhs]:"Unsupported left hand expression in is statement",[t.UnsupportedIsRhs]:"Unsupported right hand expression in is statement",[t.UnsupportedOperator]:"Unsupported operator - {operator}",[t.UnsupportedSyntax]:"Unsupported syntax - {node}",[t.UnsupportedSqlFunction]:"Sql function not found = {function}",[t.InvalidDataType]:"Invalid sql data type",[t.InvalidDate]:"Invalid date encountered",[t.InvalidOperator]:"Invalid operator encountered",[t.InvalidTime]:"Invalid time encountered",[t.IllegalInterval]:"Illegal interval",[t.FunctionNotRecognized]:"Function not recognized",[t.InvalidTimeStamp]:"Invalid timestamp encountered",[t.InvalidParameterCount]:"Invalid parameter count for call to {name}",[t.PrimarySecondaryQualifiers]:"Primary and Secondary SqlInterval qualifiers not supported",[t.YearMonthIntervals]:"Year-Month Intervals not supported",[t.CannotCastValue]:"Cannot cast value to the required data type"};let h=class e extends Error{constructor(t,r){super(i(v[t],r)),this.declaredRootClass="esri.arcade.featureset.support.sqlerror",Error.captureStackTrace&&Error.captureStackTrace(this,e)}};var m;e("n",h),e("a",m),function(e){e.NeverReach="NeverReach",e.NotImplemented="NotImplemented",e.Cancelled="Cancelled",e.InvalidStatResponse="InvalidStatResponse",e.InvalidRequest="InvalidRequest",e.RequestFailed="RequestFailed",e.MissingFeatures="MissingFeatures",e.AggregationFieldNotFound="AggregationFieldNotFound",e.DataElementsNotFound="DataElementsNotFound"}(m||e("a",m={}));const w={[m.Cancelled]:"Cancelled",[m.InvalidStatResponse]:"Invalid statistics response from service",[m.InvalidRequest]:"Invalid request",[m.RequestFailed]:"Request failed - {reason}",[m.MissingFeatures]:"Missing features",[m.AggregationFieldNotFound]:"Aggregation field not found",[m.DataElementsNotFound]:"Data elements not found on service",[m.NeverReach]:"Encountered unreachable logic",[m.NotImplemented]:"Not implemented"};let I=class e extends Error{constructor(t,r){super(i(w[t],r)),this.declaredRootClass="esri.arcade.featureset.support.featureseterror",Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function g(e){return Number.isNaN(e)||0===e?e:Math.trunc(e)}e("s",I);class y{constructor(e){this._timeStampOffset=e,this._date=null}toDateTime(){return this._date??=o.fromISO(this._timeStampOffset,{setZone:!0}),this._date}get isValid(){return this.toDateTime().isValid}get timezoneOffsetHour(){return g(this.toDateTime().offset/60)}get timezoneOffsetMinutes(){return g(this.toDateTime().offset%60)}toMilliseconds(){return this.toDateTime().toMillis()}get hour(){return this.toDateTime().hour}get minute(){return this.toDateTime().minute}get second(){return this.toDateTime().second}get day(){return this.toDateTime().day}get month(){return this.toDateTime().month}get year(){return this.toDateTime().year}startOfDay(){return y.fromDateTime(this.toDateTime().startOf("day"))}static fromJSDate(e){return new y(o.fromJSDate(e).toISO({includeOffset:!0}))}static fromDateTime(e){return new y(e.toISO({includeOffset:!0}))}static fromParts(e,t,r=0,n=0,a=0,i=0,o=0,s=!1,u=0,l=0){const c=`${e.toString().padStart(4,"0")}-${t.toString().padStart(2,"0")}-${r.toString().padStart(2,"0")}`;let f="";i<10&&(f="0");let d=`${n.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}:${f+i.toString()}`;0!==o&&(d+="."+o.toString().padStart(3,"0"));const p=`${s?"-":"+"}${u.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`;return new y(c+"T"+d+p)}toStorageFormat(){return this._timeStampOffset}toString(){return this._timeStampOffset}toSQLValue(){let e=this.toDateTime().toSQL({includeOffset:!0,includeOffsetSpace:!0});return e&&(e=e.replace(".000","")),e}toSQLWithKeyword(){return`timestamp '${this.toSQLValue()}'`}addMilliseconds(e){const t=this.toDateTime().plus(e);return y.fromDateTime(t)}}function T(e,t){const r=N[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}e("r",y);const N={min:{minParams:1,maxParams:1,evaluate:e=>x(e[0],"min")},max:{minParams:1,maxParams:1,evaluate:e=>x(e[0],"max")},avg:{minParams:1,maxParams:1,evaluate:e=>S(e[0])},sum:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;let r=0;for(let n=0;n<e.length;n++){const a=e[n];if(null!==a){if(!O(a))throw new h(t.InvalidValueForAggregateFunction);r+=a}}return r}(e[0])},stddev:{minParams:1,maxParams:1,evaluate:e=>function(e){if(null===e)return null;const t=b(e);return null===t?null:Math.sqrt(t)}(e[0])},count:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].length},var:{minParams:1,maxParams:1,evaluate:e=>b(e[0])}};function S(e){if(null===e)return null;let r=0,n=0;for(let a=0;a<e.length;a++){const i=e[a];if(null!==i){if(!O(i))throw new h(t.InvalidValueForAggregateFunction);n++,r+=i}}return 0===n?null:r/e.length}function O(e){return"number"==typeof e}function x(e,t){if(null===e)return null;let a=null,i=null;for(const s of e){let e=s;e=s instanceof r||s instanceof n?s.toNumber():s instanceof o?s.toMillis():s instanceof y?s.toMilliseconds():s,(null===a||"max"===t&&null!==i&&null!==e&&i<=e||"min"===t&&null!==i&&null!==e&&i>=e)&&(a=s,i=e)}return a}function b(e){if(null===e)return null;if(0===(e=e.filter((e=>null!==e))).length)return null;const r=S(e);if(null===r)return null;let n=0;for(const a of e){if(!O(a))throw new h(t.InvalidValueForAggregateFunction);n+=(r-a)**2}return n/(e.length-1)}class C{constructor(){this.op="+",this.day=0,this.second=0,this.hour=0,this.month=0,this.year=0,this.minute=0,this.millis=0}static _fixDefaults(e){if(null!==e.precision||null!==e.secondary)throw new h(t.PrimarySecondaryQualifiers)}static _parseSecondsComponent(e,t){if(t.includes(".")){const r=t.split(".");e.second=parseFloat(r[0]),e.millis=parseInt(r[1],10)}else e.second=parseFloat(t)}static createFromMilliseconds(e){const t=new C;return t.second=e/1e3,t}static createFromValueAndQualifier(e,r,n){let a=null;const i=new C;if(i.op="-"===n?"-":"+","interval-period"===r.type){C._fixDefaults(r);const n=new RegExp("^[0-9]{1,}$");if("year"===r.period||"month"===r.period)throw new h(t.YearMonthIntervals);if("second"===r.period){if(!/^[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$/.test(e))throw new h(t.IllegalInterval);C._parseSecondsComponent(i,e)}else{if(!n.test(e))throw new h(t.IllegalInterval);i[r.period]=parseFloat(e)}}else{if(C._fixDefaults(r.start),C._fixDefaults(r.end),"year"===r.start.period||"month"===r.start.period||"year"===r.end.period||"month"===r.end.period)throw new h(t.YearMonthIntervals);switch(r.start.period){case"day":switch(r.end.period){case"hour":if(a=new RegExp("^[0-9]{1,} [0-9]{1,}$"),!a.test(e))throw new h(t.IllegalInterval);i[r.start.period]=parseFloat(e.split(" ")[0]),i[r.end.period]=parseFloat(e.split(" ")[1]);break;case"minute":if(a=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,}$"),!a.test(e))throw new h(t.IllegalInterval);{i[r.start.period]=parseFloat(e.split(" ")[0]);const t=e.split(" ")[1].split(":");i.hour=parseFloat(t[0]),i.minute=parseFloat(t[1])}break;case"second":if(a=new RegExp("^[0-9]{1,} [0-9]{1,2}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!a.test(e))throw new h(t.IllegalInterval);{i[r.start.period]=parseFloat(e.split(" ")[0]);const t=e.split(" ")[1].split(":");i.hour=parseFloat(t[0]),i.minute=parseFloat(t[1]),C._parseSecondsComponent(i,t[2])}break;default:throw new h(t.IllegalInterval)}break;case"hour":switch(r.end.period){case"minute":if(a=new RegExp("^[0-9]{1,}:[0-9]{1,}$"),!a.test(e))throw new h(t.IllegalInterval);i.hour=parseFloat(e.split(":")[0]),i.minute=parseFloat(e.split(":")[1]);break;case"second":if(a=new RegExp("^[0-9]{1,}:[0-9]{1,2}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!a.test(e))throw new h(t.IllegalInterval);{const t=e.split(":");i.hour=parseFloat(t[0]),i.minute=parseFloat(t[1]),C._parseSecondsComponent(i,t[2])}break;default:throw new h(t.IllegalInterval)}break;case"minute":if("second"!==r.end.period)throw new h(t.IllegalInterval);if(a=new RegExp("^[0-9]{1,}:[0-9]{1,}([.]{1}[0-9]{1,}){0,1}$"),!a.test(e))throw new h(t.IllegalInterval);{const t=e.split(":");i.minute=parseFloat(t[0]),C._parseSecondsComponent(i,t[1])}break;default:throw new h(t.IllegalInterval)}}return i}valueInMilliseconds(){return("-"===this.op?-1:1)*(this.millis+1e3*this.second+60*this.minute*1e3+60*this.hour*60*1e3+24*this.day*60*60*1e3+this.month*(365/12)*24*60*60*1e3+365*this.year*24*60*60*1e3)}}const A=/^(\d{1,2}):(\d{1,2}):(\d{1,2})$/,M=/^(\d{1,2}):(\d{1,2})$/,E=/^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/,F=/^(\d{4})-(\d{1,2})-(\d{1,2})$/,D=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$/,P=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,_=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$/,L=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/;function R(e,t){if(t instanceof s)return t===u.instance?o.fromMillis(e.getTime(),{zone:u.instance}):o.fromJSDate(e,{zone:t});switch(t){case"system":case"local":case null:return o.fromJSDate(e);default:return"unknown"===t?.toLowerCase()?o.fromMillis(e.getTime(),{zone:u.instance}):o.fromJSDate(e,{zone:t})}}function U(e){return"number"==typeof e}function J(e){return"string"==typeof e||e instanceof String}function V(e){return e instanceof C}function $(e){return e instanceof Date}function z(e){return e instanceof o}function Z(e){return e instanceof r}function k(e){return e instanceof n}function H(e){return e instanceof y}function q(e){let r=A.exec(e);if(null!==r){const[,e,a,i]=r,o=n.fromParts(parseInt(e,10),parseInt(a,10),parseInt(i,10),0);if(null!==o)return o;throw new h(t.InvalidTime)}if(r=M.exec(e),null!==r){const[,e,a]=r,i=n.fromParts(parseInt(e,10),parseInt(a,10),0,0);if(null!==i)return i;throw new h(t.InvalidTime)}if(r=E.exec(e),null!==r){const[,e,a,i,o]=r,s=n.fromParts(parseInt(e,10),parseInt(a,10),parseInt(i,10),parseInt(o,10));if(null!==s)return s;throw new h(t.InvalidTime)}throw new h(t.InvalidTime)}function j(e,r,n=!1){let a=D.exec(e);if(null!==a){const[,e,n,i,s,u,c,f]=a,d=o.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(i,10),hour:parseInt(s,10),minute:parseInt(u,10),second:parseInt(c,10),millisecond:f?parseInt(f.replace(".",""),10):0},{zone:l(r)});if(!1===d.isValid)throw new h(t.InvalidTimeStamp);return d}if(a=P.exec(e),null!==a){const[,e,r,n,i,o,s,u,l,c,f]=a,d=y.fromParts(parseInt(e,10),parseInt(r,10),parseInt(n,10),parseInt(i,10),parseInt(o,10),parseInt(s,10),u?parseInt(u.replace(".",""),10):0,"-"===l,parseInt(c,10),parseInt(f,10));if(!1===d.isValid)throw new h(t.InvalidTimeStamp);return d}if(a=_.exec(e),null!==a){const[,e,r,n,i,o,s,u,l]=a,c=y.fromParts(parseInt(e,10),parseInt(r,10),parseInt(n,10),parseInt(i,10),parseInt(o,10),0,0,"-"===s,parseInt(u,10),parseInt(l,10));if(!1===c.isValid)throw new h(t.InvalidTimeStamp);return c}if(a=L.exec(e),null!==a){const[,e,n,i,s,u]=a,c=o.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(i,10),hour:parseInt(s,10),minute:parseInt(u,10),second:0},{zone:l(r)});if(!1===c.isValid)throw new h(t.InvalidTimeStamp);return c}if(a=F.exec(e),null!==a){const[,e,n,i]=a,s=o.fromObject({year:parseInt(e,10),month:parseInt(n,10),day:parseInt(i,10),hour:0,minute:0,second:0},{zone:l(r)});if(!1===s.isValid)throw new h(t.InvalidTimeStamp);return s}throw new h(t.InvalidTimeStamp)}function Y(e,n){const a=F.exec(e);if(null===a)try{return j(e,n)}catch{throw new h(t.InvalidDate)}const[,i,o,s]=a,u=r.fromParts(parseInt(i,10),parseInt(o,10),parseInt(s,10));if(null===u)throw new h(t.InvalidDate);return u}const B=321408e5,Q=26784e5,G=864e5,W=36e5,K=6e4;function X(e){return!!z(e)||!!H(e)}function ee(e){if(z(e))return e.toMillis();if(Z(e))return e.toNumber();if(H(e))return e.toMilliseconds();throw new h(t.InvalidDataType)}function te(e,r,n,a){if(null==e||null==r)return null;if(U(e)){if(U(r))return re(e,r,n);if(J(r))return function(e,t,r){const n=parseFloat(t);if(!isNaN(n))return re(e,n,r);const a=e.toString();switch(r){case"<>":return a!==t;case"=":return a===t;case">":return a>t;case"<":return a<t;case">=":return a>=t;case"<=":return a<=t}}(e,r,n);if(function(e){return!!(z(e)||Z(e)||H(e)||k(e))}(r))throw new h(t.InvalidOperator);if(Z(r))throw new h(t.InvalidOperator)}else if(J(e)){if(U(r))return function(e,t,r){const n=parseFloat(e);if(!isNaN(n))return re(n,t,r);const a=t.toString();switch(r){case"<>":return e!==a;case"=":return e===a;case">":return e>a;case"<":return e<a;case">=":return e>=a;case"<=":return e<=a}}(e,r,n);if(J(r))return function(e,t,r){switch(r){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}(e,r,n);if(z(r))throw new h(t.InvalidOperator);if(Z(r))throw new h(t.InvalidOperator);if(k(r))throw new h(t.InvalidOperator);if(H(r))throw new h(t.InvalidOperator)}else if(z(e)){if(X(r)){if(e instanceof o&&c(e.zone)){if(r instanceof o&&!1===c(r.zone))return ne(e,r,n);if(r instanceof y)return ne(e,r,n)}else if(r instanceof o&&c(r.zone)){if(e instanceof o&&!1===c(e.zone))return ne(e,r,n);if(e instanceof y)return ne(e,r,n)}return re(ee(e),ee(r),n)}if(J(r))throw new h(t.InvalidOperator);if(Z(r))return function(e,t,r){const n=t.toDateTimeLuxon(e.zone);return re((e=e.startOf("day")).toMillis(),n.toMillis(),r)}(e,r,n);if(k(r))throw new h(t.InvalidOperator);if(U(r))throw new h(t.InvalidOperator)}else if(Z(e)){if(H(r))return function(e,t,r){const n=e.toDateTimeLuxon(t.toDateTime().zone);return t=t.startOfDay(),re(n.toMillis(),t.toMilliseconds(),r)}(e,r,n);if(z(r))return function(e,t,r){const n=e.toDateTimeLuxon(t.zone);return t=t.startOf("day"),re(n.toMillis(),t.toMillis(),r)}(e,r,n);if(J(r))throw new h(t.InvalidOperator);if(Z(r))return re(e.toNumber(),r.toNumber(),n);if(k(r))throw new h(t.InvalidOperator);if(U(r))throw new h(t.InvalidOperator)}else if(k(e)){if(k(r))return re(e.toNumber(),r.toNumber(),n);if(J(r))throw new h(t.InvalidOperator);if(U(r))throw new h(t.InvalidOperator);if(Z(r))throw new h(t.InvalidOperator);if(X(r))throw new h(t.InvalidOperator)}else if(H(e)){if(X(r))return r instanceof o&&c(r.zone)?ne(e,r,n):re(ee(e),ee(r),n);if(J(r))throw new h(t.InvalidOperator);if(Z(r))return function(e,t,r){const n=t.toDateTimeLuxon(e.toDateTime().zone);return re((e=e.startOfDay()).toMilliseconds(),n.toMillis(),r)}(e,r,n);if(k(r))throw new h(t.InvalidOperator);if(U(r))throw new h(t.InvalidOperator)}switch(n){case"<>":return e!==r;case"=":return e===r;case">":return e>r;case"<":return e<r;case">=":return e>=r;case"<=":return e<=r}}function re(e,t,r){switch(r){case"<>":return e!==t;case"=":return e===t;case">":return e>t;case"<":return e<t;case">=":return e>=t;case"<=":return e<=t}}function ne(e,t,r){e instanceof y&&(e=e.toDateTime()),t instanceof y&&(t=t.toDateTime());const n=ae(e),a=ae(t);switch(r){case"<>":return n!==a;case"=":return n===a;case">":return n>a;case"<":return n<a;case">=":return n>=a;case"<=":return n<=a}}function ae(e){return e.year*B+e.month*Q+e.day*G+e.hour*W+e.minute*K+1e3*e.second+e.millisecond}function ie(e,r,n){const a=le[e.toLowerCase()];if(null==a)throw new h(t.FunctionNotRecognized);if(r.length<a.minParams||r.length>a.maxParams)throw new h(t.InvalidParameterCount,{name:e.toUpperCase()});return a.evaluate(r,n)}function oe(e){return"string"==typeof e||e instanceof String}function se(e){return!($(e)||Z(e)||z(e)||k(e)||H(e))}function ue(e){return Z(e)||k(e)?e.toString():H(e)?e.toSQLValue():z(e)?0===e.millisecond?e.toFormat("yyyy-LL-dd HH:mm:ss"):e.toSQL({includeOffset:!1}):$(e)?ue(o.fromJSDate(e)):e.toString()}const le={extract:{minParams:2,maxParams:2,evaluate:([e,r])=>{if(null==r)return null;if($(r))switch(e.toUpperCase()){case"SECOND":return r.getSeconds();case"MINUTE":return r.getMinutes();case"HOUR":return r.getHours();case"DAY":return r.getDate();case"MONTH":return r.getMonth()+1;case"YEAR":return r.getFullYear();case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":return 0}else if(z(r))switch(e.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour;case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(t.InvalidFunctionParameters,{function:"EXTRACT"})}else if(Z(r))switch(e.toUpperCase()){case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":case"TIMEZONE_MINUTE":throw new h(t.InvalidFunctionParameters,{function:"EXTRACT"})}else if(k(r))switch(e.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour}else if(H(r))switch(e.toUpperCase()){case"SECOND":return r.second;case"MINUTE":return r.minute;case"HOUR":return r.hour;case"DAY":return r.day;case"MONTH":return r.month;case"YEAR":return r.year;case"TIMEZONE_HOUR":return r.timezoneOffsetHour;case"TIMEZONE_MINUTE":return r.timezoneOffsetMinutes}throw new h(t.InvalidFunctionParameters,{function:"EXTRACT"})}},substring:{minParams:2,maxParams:3,evaluate:e=>{if(2===e.length){const[t,r]=e;return null==t||null==r?null:t.toString().substring(r-1)}if(3===e.length){const[t,r,n]=e;return null==t||null==r||null==n?null:n<=0?"":t.toString().substring(r-1,r+n-1)}}},position:{minParams:2,maxParams:2,evaluate:([e,t])=>null==e||null==t?null:t.indexOf(e)+1},trim:{minParams:2,maxParams:3,evaluate:e=>{const r=3===e.length,n=r?e[1]:" ",a=r?e[2]:e[1];if(null==n||null==a)return null;const i=`(${f(n)})`;switch(e[0]){case"BOTH":return a.replaceAll(new RegExp(`^${i}*|${i}*$`,"g"),"");case"LEADING":return a.replaceAll(new RegExp(`^${i}*`,"g"),"");case"TRAILING":return a.replaceAll(new RegExp(`${i}*$`,"g"),"")}throw new h(t.InvalidFunctionParameters,{function:"TRIM"})}},abs:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.abs(e[0])},ceiling:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.ceil(e[0])},floor:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.floor(e[0])},log:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])},log10:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.log(e[0])*Math.LOG10E},sin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sin(e[0])},cos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cos(e[0])},tan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tan(e[0])},asin:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.asin(e[0])},acos:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.acos(e[0])},atan:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.atan(e[0])},sign:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0]>0?1:e[1]<0?-1:0},power:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]**e[1]},mod:{minParams:2,maxParams:2,evaluate:e=>null==e[0]||null==e[1]?null:e[0]%e[1]},round:{minParams:1,maxParams:2,evaluate:e=>{const t=e[0],r=2===e.length?10**e[1]:1;return null==t?null:Math.round(t*r)/r}},truncate:{minParams:1,maxParams:2,evaluate:e=>null==e[0]?null:1===e.length?parseInt(e[0].toFixed(0),10):parseFloat(e[0].toFixed(e[1]))},char_length:{minParams:1,maxParams:1,evaluate:e=>oe(e[0])?e[0].length:0},concat:{minParams:1,maxParams:1/0,evaluate:e=>{let t="";for(let r=0;r<e.length;r++){if(null==e[r])return null;t+=e[r].toString()}return t}},lower:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toLowerCase()},upper:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:e[0].toString().toUpperCase()},coalesce:{minParams:1,maxParams:1/0,evaluate:e=>{for(const t of e)if(null!==t)return t;return null}},cosh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.cosh(e[0])},sinh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.sinh(e[0])},tanh:{minParams:1,maxParams:1,evaluate:e=>null==e[0]?null:Math.tanh(e[0])},nullif:{minParams:2,maxParams:2,evaluate:(e,t)=>te(e[0],e[1],"=")?null:e[0]},cast:{minParams:2,maxParams:2,evaluate:(e,a)=>{const i=e[0],o=e[1];if(null===i)return null;switch(o.type){case"integer":{if(!se(i))throw new h(t.CannotCastValue);const e=parseInt(i,10);if(isNaN(e))throw new h(t.CannotCastValue);return e}case"smallint":{if(!se(i))throw new h(t.CannotCastValue);const e=parseInt(i,10);if(isNaN(e))throw new h(t.CannotCastValue);if(e>32767||e<-32767)throw new h(t.CannotCastValue);return e}case"float":case"real":{if(!se(i))throw new h(t.CannotCastValue);const e=parseFloat(i);if(isNaN(e))throw new h(t.CannotCastValue);return e}case"time":return function(e){if($(e))return n.fromDateJS(e);if(z(e))return n.fromDateTime(e);if(Z(e))throw new h(t.CannotCastValue);if(k(e))return e;if(H(e))return n.fromSqlTimeStampOffset(e);if(oe(e))return q(e);throw new h(t.CannotCastValue)}(i);case"date":return function(e){if($(e))return r.fromDateJS(e);if(z(e))return r.fromParts(e.year,e.month,e.day);if(Z(e))return e;if(k(e))throw new h(t.CannotCastValue);if(H(e)&&null===r.fromParts(e.year,e.month,e.day))throw new h(t.CannotCastValue);if(oe(e)){const t=r.fromReader(e);if(null!==t&&t.isValid)return t}throw new h(t.CannotCastValue)}(i);case"timestamp":return function(e,r,n){if($(e))return R(e,r);if(z(e))return e;if(Z(e))return e.toDateTimeLuxon("unknown");if(k(e))throw new h(t.CannotCastValue);if(H(e))return e;if(oe(e))return j(e,"unknown",n);throw new h(t.CannotCastValue)}(i,a,!0===o.withtimezone);case"varchar":{const e=ue(i);if(e.length>o.size)throw new h(t.CannotCastValue);return e}default:throw new h(t.InvalidDataType)}}}};function ce(e,r,n,a){if("||"===e)return ie("concat",[r,n],a);if(null===r||null===n)return null;if(U(r)){if(U(n))return fe(r,n,e);if(V(n))return function(e,r,n){switch(n){case"+":return C.createFromMilliseconds(e+r.valueInMilliseconds());case"-":return C.createFromMilliseconds(e-r.valueInMilliseconds());case"*":return C.createFromMilliseconds(e*r.valueInMilliseconds());case"/":return C.createFromMilliseconds(e/r.valueInMilliseconds())}throw new h(t.InvalidOperator)}(r,n,e);if(k(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(Z(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(H(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(z(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(J(n))return function(e,r,n){const a=parseFloat(r);if(isNaN(a))throw new h(t.InvalidOperator);return fe(e,a,n)}(r,n,e);throw new h(t.InvalidOperator)}if(Z(r)){if(U(n))return function(e,r,n){const a=1e3*r*24*60*60;switch(n){case"+":return e.plus("milliseconds",a);case"-":return e.plus("milliseconds",-1*a)}throw new h(t.InvalidOperator)}(r,n,e);if(V(n))return function(e,r,n){switch(n){case"+":return e.plus("milliseconds",r.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*r.valueInMilliseconds())}throw new h(t.InvalidOperator)}(r,n,e);if(k(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(Z(n))return function(e,r,n){if("-"===n)return e.toDateTimeLuxon("UTC").diff(r.toDateTimeLuxon("UTC")).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(H(n))return function(e,r,n){if("-"===n)return e.toDateTimeLuxon(r.toDateTime().zone).diff(r.toDateTime()).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(z(n))return function(e,r,n){if("-"===n)return e.toDateTimeLuxon(r.zone).diff(r).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(J(n))return function(e,r,n){throw new h(t.InvalidOperator)}();throw new h(t.InvalidOperator)}if(k(r)){if(U(n))return function(e,r,n){const a=1e3*r*24*60*60;switch(n){case"+":return e.plus("milliseconds",a);case"-":return e.plus("milliseconds",-1*a)}throw new h(t.InvalidOperator)}(r,n,e);if(V(n))return function(e,r,n){switch(n){case"+":return e.plus("milliseconds",r.valueInMilliseconds());case"-":return e.plus("milliseconds",-1*r.valueInMilliseconds())}throw new h(t.InvalidOperator)}(r,n,e);if(k(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(Z(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(H(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(z(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(J(n))return function(e,r,n){throw new h(t.InvalidOperator)}();throw new h(t.InvalidOperator)}if(V(r)){if(U(n))return function(e,r,n){switch(n){case"+":return C.createFromMilliseconds(e.valueInMilliseconds()+r);case"-":return C.createFromMilliseconds(e.valueInMilliseconds()-r);case"*":return C.createFromMilliseconds(e.valueInMilliseconds()*r);case"/":return C.createFromMilliseconds(e.valueInMilliseconds()/r)}throw new h(t.InvalidOperator)}(r,n,e);if(V(n))return function(e,r,n){switch(n){case"+":return C.createFromMilliseconds(e.valueInMilliseconds()+r.valueInMilliseconds());case"-":return C.createFromMilliseconds(e.valueInMilliseconds()-r.valueInMilliseconds());case"*":return C.createFromMilliseconds(e.valueInMilliseconds()*r.valueInMilliseconds());case"/":return C.createFromMilliseconds(e.valueInMilliseconds()/r.valueInMilliseconds())}throw new h(t.InvalidOperator)}(r,n,e);if(k(n))return function(e,r,n){if("+"===n)return r.plus("milliseconds",e.valueInMilliseconds());throw new h(t.InvalidOperator)}(r,n,e);if(Z(n))return function(e,r,n){if("+"===n)return r.plus("milliseconds",e.valueInMilliseconds());throw new h(t.InvalidOperator)}(r,n,e);if(H(n))return function(e,r,n){if("+"===n)return r.addMilliseconds(e.valueInMilliseconds());throw new h(t.InvalidOperator)}(r,n,e);if(z(n))return function(e,r,n){switch(n){case"+":return r.plus({milliseconds:e.valueInMilliseconds()});case"-":return e.valueInMilliseconds()-r.toMillis()}throw new h(t.InvalidOperator)}(r,n,e);if(J(n))return function(e,r,n){throw new h(t.InvalidOperator)}();throw new h(t.InvalidOperator)}if(z(r)){if(U(n))return function(e,r,n){const a=1e3*r*24*60*60;switch(n){case"+":return e.plus({milliseconds:a});case"-":return e.minus({milliseconds:a})}throw new h(t.InvalidOperator)}(r,n,e);if(V(n))return function(e,r,n){switch(n){case"+":return e.plus({milliseconds:r.valueInMilliseconds()});case"-":return e.minus({milliseconds:r.valueInMilliseconds()})}throw new h(t.InvalidOperator)}(r,n,e);if(k(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(Z(n))return function(e,r,n){if("-"===n)return e.diff(r.toDateTimeLuxon(e.zone)).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(H(n))return function(e,r,n){if("-"===n)return e.diff(r.toDateTime()).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(z(n))return function(e,r,n){if("-"===n)return e.diff(r).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(J(n))return function(e,r,n){throw new h(t.InvalidOperator)}();throw new h(t.InvalidOperator)}if(H(r)){if(U(n))return function(e,r,n){const a=1e3*r*24*60*60;switch(n){case"+":return e.addMilliseconds(a);case"-":return e.addMilliseconds(-1*a)}throw new h(t.InvalidOperator)}(r,n,e);if(V(n))return function(e,r,n){switch(n){case"+":return e.addMilliseconds(r.valueInMilliseconds());case"-":return e.addMilliseconds(-1*r.valueInMilliseconds())}throw new h(t.InvalidOperator)}(r,n,e);if(k(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(Z(n))return function(e,r,n){if("-"===n)return e.toDateTime().diff(r.toDateTimeLuxon(e.toDateTime().zone)).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(H(n))return function(e,r,n){if("-"===n)return e.toDateTime().diff(r.toDateTime()).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(z(n))return function(e,r,n){if("-"===n)return e.toDateTime().diff(r).as("days");throw new h(t.InvalidOperator)}(r,n,e);if(J(n))return function(e,r,n){throw new h(t.InvalidOperator)}();throw new h(t.InvalidOperator)}if(J(r)){if(U(n))return function(e,r,n){const a=parseFloat(e);if(isNaN(a))throw new h(t.InvalidOperator);return fe(a,r,n)}(r,n,e);if(V(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(k(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(Z(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(H(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(z(n))return function(e,r,n){throw new h(t.InvalidOperator)}();if(J(n))return function(e,r,n){if("+"===n)return e+r;throw new h(t.InvalidOperator)}(r,n,e);throw new h(t.InvalidOperator)}throw new h(t.InvalidOperator)}function fe(e,r,n){switch(n){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"/":return e/r}throw new h(t.InvalidOperator)}var de,pe,ve={exports:{}};pe=function(){function e(t,r,n,a){var i=Error.call(this,t);return Object.setPrototypeOf&&Object.setPrototypeOf(i,e.prototype),i.expected=r,i.found=n,i.location=a,i.name="SyntaxError",i}function t(e,t,r){return r=r||" ",e.length>t?e:(t-=e.length,e+(r+=r.repeat(t)).slice(0,t))}return function(e,t){function r(){this.constructor=e}r.prototype=t.prototype,e.prototype=new r}(e,Error),e.prototype.format=function(e){var r="Error: "+this.message;if(this.location){var n,a=null;for(n=0;n<e.length;n++)if(e[n].source===this.location.source){a=e[n].text.split(/\r\n|\n|\r/g);break}var i=this.location.start,o=this.location.source&&"function"==typeof this.location.source.offset?this.location.source.offset(i):i,s=this.location.source+":"+o.line+":"+o.column;if(a){var u=this.location.end,l=t("",o.line.toString().length," "),c=a[i.line-1],f=(i.line===u.line?u.column:c.length+1)-i.column||1;r+="\n --\x3e "+s+"\n"+l+" |\n"+o.line+" | "+c+"\n"+l+" | "+t("",i.column-1," ")+t("",f,"^")}else r+="\n at "+s}return r},e.buildMessage=function(e,t){var r={literal:function(e){return'"'+a(e.text)+'"'},class:function(e){var t=e.parts.map((function(e){return Array.isArray(e)?i(e[0])+"-"+i(e[1]):i(e)}));return"["+(e.inverted?"^":"")+t.join("")+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(e){return e.description}};function n(e){return e.charCodeAt(0).toString(16).toUpperCase()}function a(e){return e.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function i(e){return e.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,(function(e){return"\\x0"+n(e)})).replace(/[\x10-\x1F\x7F-\x9F]/g,(function(e){return"\\x"+n(e)}))}function o(e){return r[e.type](e)}return"Expected "+function(e){var t,r,n=e.map(o);if(n.sort(),n.length>0){for(t=1,r=1;t<n.length;t++)n[t-1]!==n[t]&&(n[r]=n[t],r++);n.length=r}switch(n.length){case 1:return n[0];case 2:return n[0]+" or "+n[1];default:return n.slice(0,-1).join(", ")+", or "+n[n.length-1]}}(e)+" but "+function(e){return e?'"'+a(e)+'"':"end of input"}(t)+" found."},{SyntaxError:e,parse:function(t,r){var n,a={},i=(r=void 0!==r?r:{}).grammarSource,o={start:za},s=za,u="!",l="=",c=">=",f=">",d="<=",p="<>",v="<",h="!=",m="+",w="-",I="||",g="*",y="/",T="@",N="'",S="N'",O="''",x=".",b="null",C="true",A="false",M="in",E="is",F="like",D="escape",P="not",_="and",L="or",R="between",U="from",J="for",V="substring",$="extract",z="trim",Z="position",k="timestamp",H="date",q="time",j="leading",Y="trailing",B="both",Q="cast",G="as",W="integer",K="smallint",X="float",ee="real",te="varchar",re="to",ne="interval",ae="year",ie="timezone_hour",oe="timezone_minute",se="month",ue="day",le="hour",ce="minute",fe="second",de="case",pe="end",ve="when",he="then",me="else",we=",",Ie="(",ge=")",ye="`",Te=/^[A-Za-z_\x80-\uFFFF]/,Ne=/^[A-Za-z0-9_]/,Se=/^[A-Za-z0-9_.\x80-\uFFFF]/,Oe=/^["]/,xe=/^[^']/,be=/^[0-9]/,Ce=/^[eE]/,Ae=/^[+\-]/,Me=/^[ \t\n\r]/,Ee=/^[^`]/,Fe=La("!",!1),De=La("=",!1),Pe=La(">=",!1),_e=La(">",!1),Le=La("<=",!1),Re=La("<>",!1),Ue=La("<",!1),Je=La("!=",!1),Ve=La("+",!1),$e=La("-",!1),ze=La("||",!1),Ze=La("*",!1),ke=La("/",!1),He=Ra([["A","Z"],["a","z"],"_",["","￿"]],!1,!1),qe=Ra([["A","Z"],["a","z"],["0","9"],"_"],!1,!1),je=Ra([["A","Z"],["a","z"],["0","9"],"_",".",["","￿"]],!1,!1),Ye=Ra(['"'],!1,!1),Be=La("@",!1),Qe=La("'",!1),Ge=La("N'",!1),We=La("''",!1),Ke=Ra(["'"],!0,!1),Xe=La(".",!1),et=Ra([["0","9"]],!1,!1),tt=Ra(["e","E"],!1,!1),rt=Ra(["+","-"],!1,!1),nt=La("NULL",!0),at=La("TRUE",!0),it=La("FALSE",!0),ot=La("IN",!0),st=La("IS",!0),ut=La("LIKE",!0),lt=La("ESCAPE",!0),ct=La("NOT",!0),ft=La("AND",!0),dt=La("OR",!0),pt=La("BETWEEN",!0),vt=La("FROM",!0),ht=La("FOR",!0),mt=La("SUBSTRING",!0),wt=La("EXTRACT",!0),It=La("TRIM",!0),gt=La("POSITION",!0),yt=La("TIMESTAMP",!0),Tt=La("DATE",!0),Nt=La("TIME",!0),St=La("LEADING",!0),Ot=La("TRAILING",!0),xt=La("BOTH",!0),bt=La("CAST",!0),Ct=La("AS",!0),At=La("INTEGER",!0),Mt=La("SMALLINT",!0),Et=La("FLOAT",!0),Ft=La("REAL",!0),Dt=La("VARCHAR",!0),Pt=La("TO",!0),_t=La("INTERVAL",!0),Lt=La("YEAR",!0),Rt=La("TIMEZONE_HOUR",!0),Ut=La("TIMEZONE_MINUTE",!0),Jt=La("MONTH",!0),Vt=La("DAY",!0),$t=La("HOUR",!0),zt=La("MINUTE",!0),Zt=La("SECOND",!0),kt=La("CASE",!0),Ht=La("END",!0),qt=La("WHEN",!0),jt=La("THEN",!0),Yt=La("ELSE",!0),Bt=La(",",!1),Qt=La("(",!1),Gt=La(")",!1),Wt=Ra([" ","\t","\n","\r"],!1,!1),Kt=La("`",!1),Xt=Ra(["`"],!0,!1),er=function(e){return e},tr=function(e,t){var r={type:"expression-list"},n=function(e,t,r){return function(e,t){for(var r=[e],n=0;n<t.length;n++)r.push(t[n][3]);return r}(e,t)}(e,t);return r.value=n,r},rr=function(e,t){return Oo(e,t)},nr=function(e,t){return Oo(e,t)},ar=function(e){return function(e,t){return{type:"unary-expression",operator:e,expr:t}}("NOT",e)},ir=function(e,t){return""==t||null==t||null==t?e:"arithmetic"==t.type?Oo(e,t.tail):So(t.op,e,t.right,t.escape)},or=function(e){return{type:"arithmetic",tail:e}},sr=function(e,t){return{op:e+"NOT",right:t}},ur=function(e,t){return{op:e,right:t}},lr=function(e,t,r){return{op:"NOT"+e,right:{type:"expression-list",value:[t,r]}}},cr=function(e,t,r){return{op:e,right:{type:"expression-list",value:[t,r]}}},fr=function(e){return e[0]+" "+e[2]},dr=function(e){return e[0]+" "+e[2]},pr=function(e,t,r){return{op:e,right:t,escape:r.value}},vr=function(e,t){return{op:e,right:t,escape:""}},hr=function(e,t){return{op:e,right:t}},mr=function(e){return{op:e,right:{type:"expression-list",value:[]}}},wr=function(e,t){return{op:e,right:t}},Ir=function(e,t){return Oo(e,t)},gr=function(e,t){return Oo(e,t)},yr=function(e){return e.paren=!0,e},Tr=function(e){return/^CURRENT_DATE$/i.test(e)?{type:"current-time",mode:"date"}:/^CURRENT_TIMESTAMP$/i.test(e)?{type:"current-time",mode:"timestamp"}:{type:"column-reference",table:"",column:e}},Nr=function(e){return{type:"column-reference",table:"",column:e,delimited:!0}},Sr=function(e){return e},Or=function(e,t){return e+t.join("")},xr=function(e,t){return e+t.join("")},br=function(e){return e},Cr=function(e){return e.join("")},Ar=function(){return'"'},Mr=function(e){return{type:"parameter",value:e[1]}},Er=function(e,t){return{type:"function",name:"extract",args:{type:"expression-list",value:[{type:"string",value:e},t]}}},Fr=function(e,t,r){return{type:"function",name:"substring",args:{type:"expression-list",value:r?[e,t,r[2]]:[e,t]}}},Dr=function(e,t){return{type:"function",name:"cast",args:{type:"expression-list",value:[e,t]}}},Pr=function(){return{type:"data-type",value:{type:"integer"}}},_r=function(){return{type:"data-type",value:{type:"smallint"}}},Lr=function(){return{type:"data-type",value:{type:"float"}}},Rr=function(){return{type:"data-type",value:{type:"real"}}},Ur=function(){return{type:"data-type",value:{type:"date"}}},Jr=function(){return{type:"data-type",value:{type:"timestamp"}}},Vr=function(){return{type:"data-type",value:{type:"time"}}},$r=function(e){return{type:"data-type",value:{type:"varchar",size:parseInt(e)}}},zr=function(e,t,r){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},t,r]}}},Zr=function(e,t){return{type:"function",name:"trim",args:{type:"expression-list",value:[{type:"string",value:e??"BOTH"},t]}}},kr=function(e,t){return{type:"function",name:"position",args:{type:"expression-list",value:[e,t]}}},Hr=function(e,t){return{type:"function",name:e,args:t||{type:"expression-list",value:[]}}},qr=function(e){return"string"===e.type&&function(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&_a("Timestamp literal is invalid")}(e.value),{type:"timestamp",value:e.value}},jr=function(e){return"string"===e.type&&function(e){!0!==/^(\d{1,2}):(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2})$|^(\d{1,2}):(\d{1,2}):(\d{1,2}).([0-9]+)$/.test(e)&&_a("Time literal is invalid")}(e.value),{type:"time",value:e.value}},Yr=function(e,t,r){return{type:"interval",value:t,qualifier:r,op:e}},Br=function(e,t){return{type:"interval",value:e,qualifier:t,op:""}},Qr=function(e,t){return{type:"interval-qualifier",start:e,end:t}},Gr=function(e,t){return{type:"interval-period",period:e.value,precision:t,secondary:null}},Wr=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Kr=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},Xr=function(e,t){return{type:"interval-period",period:"second",precision:e,secondary:t}},en=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},tn=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},rn=function(e,t){return{type:"interval-period",period:e.value,precision:t,secondary:null}},nn=function(e){return{type:"interval-period",period:e.value,precision:null,secondary:null}},an=function(e,t){return{type:"interval-period",period:"second",precision:e,secondary:t}},on=function(e){return{type:"interval-period",period:"second",precision:e,secondary:null}},sn=function(){return{type:"interval-period",period:"second",precision:null,secondary:null}},un=function(){return{type:"string",value:"day"}},ln=function(){return{type:"string",value:"hour"}},cn=function(){return{type:"string",value:"minute"}},fn=function(){return{type:"string",value:"month"}},dn=function(){return{type:"string",value:"year"}},pn=function(e){return parseFloat(e)},vn=function(e){return parseFloat(e)},hn=function(e){return"string"===e.type&&function(e){!0!==/^(\d{4})-(\d{1,2})-(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})(\.[0-9]+)?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})?[ ]{0,1}(\+|\-)(\d{1,2}):(\d{1,2})$|^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{1,2}):(\d{1,2})$/.test(e)&&_a("Date literal is invalid")}(e.value),{type:"date",value:e.value}},mn=function(){return{type:"null",value:null}},wn=function(){return{type:"boolean",value:!0}},In=function(){return{type:"boolean",value:!1}},gn=function(){return"'"},yn=function(e){return{type:"string",value:e.join("")}},Tn=function(e,t){return{type:"case-expression",format:"simple",operand:e,clauses:t,else:null}},Nn=function(e,t,r){return{type:"case-expression",format:"simple",operand:e,clauses:t,else:r.value}},Sn=function(e){return{type:"case-expression",format:"searched",clauses:e,else:null}},On=function(e,t){return{type:"case-expression",format:"searched",clauses:e,else:t.value}},xn=function(e,t){return{type:"when-clause",operand:e,value:t}},bn=function(e,t){return{type:"when-clause",operand:e,value:t}},Cn=function(e){return{type:"else-clause",value:e}},An=function(e){return{type:"number",value:e}},Mn=function(e,t,r){return parseFloat(e+t+r)},En=function(e,t){return parseFloat(e+t)},Fn=function(e,t){return parseFloat(e+t)},Dn=function(e){return parseFloat(e)},Pn=function(e,t){return e[0]+t},_n=function(e){return"."+(null!=e?e:"")},Ln=function(e,t){return e+t},Rn=function(e){return e.join("")},Un=function(e,t){return"e"+(null===t?"":t)},Jn=function(){return"IN"},Vn=function(){return"IS"},$n=function(){return"LIKE"},zn=function(){return"ESCAPE"},Zn=function(){return"NOT"},kn=function(){return"AND"},Hn=function(){return"OR"},qn=function(){return"BETWEEN"},jn=function(){return"FROM"},Yn=function(){return"FOR"},Bn=function(){return"SUBSTRING"},Qn=function(){return"EXTRACT"},Gn=function(){return"TRIM"},Wn=function(){return"POSITION"},Kn=function(){return"TIMESTAMP"},Xn=function(){return"DATE"},ea=function(){return"TIME"},ta=function(){return"LEADING"},ra=function(){return"TRAILING"},na=function(){return"BOTH"},aa=function(){return"CAST"},ia=function(){return"AS"},oa=function(){return"INTEGER"},sa=function(){return"SMALLINT"},ua=function(){return"FLOAT"},la=function(){return"REAL"},ca=function(){return"VARCHAR"},fa=function(){return"TO"},da=function(){return"INTERVAL"},pa=function(){return"YEAR"},va=function(){return"TIMEZONE_HOUR"},ha=function(){return"TIMEZONE_MINUTE"},ma=function(){return"MONTH"},wa=function(){return"DAY"},Ia=function(){return"HOUR"},ga=function(){return"MINUTE"},ya=function(){return"SECOND"},Ta=function(){return"CASE"},Na=function(){return"END"},Sa=function(){return"WHEN"},Oa=function(){return"THEN"},xa=function(){return"ELSE"},ba=function(e){return e},Ca=function(e){return e.join("")},Aa=0,Ma=0,Ea=[{line:1,column:1}],Fa=0,Da=[],Pa=0;if("startRule"in r){if(!(r.startRule in o))throw new Error("Can't start parsing from rule \""+r.startRule+'".');s=o[r.startRule]}function _a(e,t){throw $a(e,t=void 0!==t?t:Ja(Ma,Aa))}function La(e,t){return{type:"literal",text:e,ignoreCase:t}}function Ra(e,t,r){return{type:"class",parts:e,inverted:t,ignoreCase:r}}function Ua(e){var r,n=Ea[e];if(n)return n;for(r=e-1;!Ea[r];)r--;for(n={line:(n=Ea[r]).line,column:n.column};r<e;)10===t.charCodeAt(r)?(n.line++,n.column=1):n.column++,r++;return Ea[e]=n,n}function Ja(e,t,r){var n=Ua(e),a=Ua(t),o={source:i,start:{offset:e,line:n.line,column:n.column},end:{offset:t,line:a.line,column:a.column}};return r&&i&&"function"==typeof i.offset&&(o.start=i.offset(o.start),o.end=i.offset(o.end)),o}function Va(e){Aa<Fa||(Aa>Fa&&(Fa=Aa,Da=[]),Da.push(e))}function $a(t,r){return new e(t,null,null,r)}function za(){var e,t;return e=Aa,yo(),(t=ka())!==a?(yo(),Ma=e,e=er(t)):(Aa=e,e=a),e}function Za(){var e,t,r,n,i,o,s,u;if(e=Aa,(t=ka())!==a){for(r=[],n=Aa,i=yo(),(o=wo())!==a?(s=yo(),(u=ka())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);n!==a;)r.push(n),n=Aa,i=yo(),(o=wo())!==a?(s=yo(),(u=ka())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);Ma=e,e=tr(t,r)}else Aa=e,e=a;return e}function ka(){var e,t,r,n,i,o,s,u;if(e=Aa,(t=Ha())!==a){for(r=[],n=Aa,i=yo(),(o=_i())!==a?(s=yo(),(u=Ha())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);n!==a;)r.push(n),n=Aa,i=yo(),(o=_i())!==a?(s=yo(),(u=Ha())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);Ma=e,e=rr(t,r)}else Aa=e,e=a;return e}function Ha(){var e,t,r,n,i,o,s,u;if(e=Aa,(t=qa())!==a){for(r=[],n=Aa,i=yo(),(o=Pi())!==a?(s=yo(),(u=qa())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);n!==a;)r.push(n),n=Aa,i=yo(),(o=Pi())!==a?(s=yo(),(u=qa())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);Ma=e,e=nr(t,r)}else Aa=e,e=a;return e}function qa(){var e,r,n,i,o;return e=Aa,(r=Di())===a&&(r=Aa,33===t.charCodeAt(Aa)?(n=u,Aa++):(n=a,0===Pa&&Va(Fe)),n!==a?(i=Aa,Pa++,61===t.charCodeAt(Aa)?(o=l,Aa++):(o=a,0===Pa&&Va(De)),Pa--,o===a?i=void 0:(Aa=i,i=a),i!==a?r=n=[n,i]:(Aa=r,r=a)):(Aa=r,r=a)),r!==a?(n=yo(),(i=qa())!==a?(Ma=e,e=ar(i)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=function(){var e,t,r;return e=Aa,(t=Qa())!==a?(yo(),(r=function(){var e;return(e=function(){var e,t,r,n,i,o,s;if(e=Aa,t=[],r=Aa,n=yo(),(i=ja())!==a?(o=yo(),(s=Qa())!==a?r=n=[n,i,o,s]:(Aa=r,r=a)):(Aa=r,r=a),r!==a)for(;r!==a;)t.push(r),r=Aa,n=yo(),(i=ja())!==a?(o=yo(),(s=Qa())!==a?r=n=[n,i,o,s]:(Aa=r,r=a)):(Aa=r,r=a);else t=a;return t!==a&&(Ma=e,t=or(t)),t}())===a&&(e=function(){var e,t,r,n;return e=Aa,(t=Ba())!==a?(yo(),(r=Io())!==a?(yo(),(n=Za())!==a?(yo(),go()!==a?(Ma=e,e=hr(t,n)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=Ba())!==a?(yo(),(r=Io())!==a?(yo(),(n=go())!==a?(Ma=e,e=mr(t)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=Ba())!==a?(yo(),(r=si())!==a?(Ma=e,e=wr(t,r)):(Aa=e,e=a)):(Aa=e,e=a))),e}())===a&&(e=function(){var e,t,r,n,i,o;return e=Aa,(t=Di())!==a?(yo(),(r=Li())!==a?(yo(),(n=Qa())!==a?(yo(),(i=Pi())!==a?(yo(),(o=Qa())!==a?(Ma=e,e=lr(r,n,o)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=Li())!==a?(yo(),(r=Qa())!==a?(yo(),(n=Pi())!==a?(yo(),(i=Qa())!==a?(Ma=e,e=cr(t,r,i)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)),e}())===a&&(e=function(){var e,t,r,n;return e=Aa,(t=Mi())!==a?(yo(),(r=Di())!==a?(yo(),(n=Qa())!==a?(Ma=e,e=sr(t,n)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=Mi())!==a?(yo(),(r=Qa())!==a?(Ma=e,e=ur(t,r)):(Aa=e,e=a)):(Aa=e,e=a)),e}())===a&&(e=function(){var e,t,r,n;return e=Aa,(t=Ya())!==a?(yo(),(r=vi())!==a?(yo(),Fi()!==a?(yo(),(n=hi())!==a?(Ma=e,e=pr(t,r,n)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=Ya())!==a?(yo(),(r=vi())!==a?(Ma=e,e=vr(t,r)):(Aa=e,e=a)):(Aa=e,e=a)),e}()),e}())===a&&(r=null),Ma=e,e=ir(t,r)):(Aa=e,e=a),e}()),e}function ja(){var e;return t.substr(Aa,2)===c?(e=c,Aa+=2):(e=a,0===Pa&&Va(Pe)),e===a&&(62===t.charCodeAt(Aa)?(e=f,Aa++):(e=a,0===Pa&&Va(_e)),e===a&&(t.substr(Aa,2)===d?(e=d,Aa+=2):(e=a,0===Pa&&Va(Le)),e===a&&(t.substr(Aa,2)===p?(e=p,Aa+=2):(e=a,0===Pa&&Va(Re)),e===a&&(60===t.charCodeAt(Aa)?(e=v,Aa++):(e=a,0===Pa&&Va(Ue)),e===a&&(61===t.charCodeAt(Aa)?(e=l,Aa++):(e=a,0===Pa&&Va(De)),e===a&&(t.substr(Aa,2)===h?(e=h,Aa+=2):(e=a,0===Pa&&Va(Je)))))))),e}function Ya(){var e,t,r,n,i;return e=Aa,t=Aa,(r=Di())!==a?(n=yo(),(i=Ei())!==a?t=r=[r,n,i]:(Aa=t,t=a)):(Aa=t,t=a),t!==a&&(Ma=e,t=fr(t)),(e=t)===a&&(e=Ei()),e}function Ba(){var e,t,r,n,i;return e=Aa,t=Aa,(r=Di())!==a?(n=yo(),(i=Ai())!==a?t=r=[r,n,i]:(Aa=t,t=a)):(Aa=t,t=a),t!==a&&(Ma=e,t=dr(t)),(e=t)===a&&(e=Ai()),e}function Qa(){var e,t,r,n,i,o,s,u;if(e=Aa,(t=Wa())!==a){for(r=[],n=Aa,i=yo(),(o=Ga())!==a?(s=yo(),(u=Wa())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);n!==a;)r.push(n),n=Aa,i=yo(),(o=Ga())!==a?(s=yo(),(u=Wa())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);Ma=e,e=Ir(t,r)}else Aa=e,e=a;return e}function Ga(){var e;return 43===t.charCodeAt(Aa)?(e=m,Aa++):(e=a,0===Pa&&Va(Ve)),e===a&&(45===t.charCodeAt(Aa)?(e=w,Aa++):(e=a,0===Pa&&Va($e)),e===a&&(t.substr(Aa,2)===I?(e=I,Aa+=2):(e=a,0===Pa&&Va(ze)))),e}function Wa(){var e,t,r,n,i,o,s,u;if(e=Aa,(t=Xa())!==a){for(r=[],n=Aa,i=yo(),(o=Ka())!==a?(s=yo(),(u=Xa())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);n!==a;)r.push(n),n=Aa,i=yo(),(o=Ka())!==a?(s=yo(),(u=Xa())!==a?n=i=[i,o,s,u]:(Aa=n,n=a)):(Aa=n,n=a);Ma=e,e=gr(t,r)}else Aa=e,e=a;return e}function Ka(){var e;return 42===t.charCodeAt(Aa)?(e=g,Aa++):(e=a,0===Pa&&Va(Ze)),e===a&&(47===t.charCodeAt(Aa)?(e=y,Aa++):(e=a,0===Pa&&Va(ke))),e}function Xa(){var e,t;return(e=function(){var e;return(e=hi())===a&&(e=function(){var e,t,r,n;return e=Aa,(t=function(){var e,t,r,n;return e=Aa,(t=gi())!==a&&(r=yi())!==a&&(n=Ti())!==a?(Ma=e,e=Mn(t,r,n)):(Aa=e,e=a),e===a&&(e=Aa,(t=gi())!==a&&(r=yi())!==a?(Ma=e,e=En(t,r)):(Aa=e,e=a),e===a&&(e=Aa,(t=gi())!==a&&(r=Ti())!==a?(Ma=e,e=Fn(t,r)):(Aa=e,e=a),e===a&&(e=Aa,(t=gi())!==a&&(Ma=e,t=Dn(t)),e=t))),e}())!==a?(r=Aa,Pa++,n=ti(),Pa--,n===a?r=void 0:(Aa=r,r=a),r!==a?(Ma=e,e=An(t)):(Aa=e,e=a)):(Aa=e,e=a),e}())===a&&(e=function(){var e,t;return e=Aa,(t=bi())!==a&&(Ma=e,t=wn()),(e=t)===a&&(e=Aa,(t=Ci())!==a&&(Ma=e,t=In()),e=t),e}())===a&&(e=function(){var e,t;return e=Aa,(t=xi())!==a&&(Ma=e,t=mn()),t}())===a&&(e=function(){var e,t;return e=Aa,ki()!==a?(yo(),(t=vi())!==a?(Ma=e,e=hn(t)):(Aa=e,e=a)):(Aa=e,e=a),e}())===a&&(e=function(){var e,t;return e=Aa,Zi()!==a?(yo(),(t=vi())!==a?(Ma=e,e=qr(t)):(Aa=e,e=a)):(Aa=e,e=a),e}())===a&&(e=li())===a&&(e=function(){var e,t;return e=Aa,Hi()!==a?(yo(),(t=vi())!==a?(Ma=e,e=jr(t)):(Aa=e,e=a)):(Aa=e,e=a),e}()),e}())===a&&(e=function(){var e,t,r;return e=Aa,Vi()!==a?(yo(),Io()!==a?(yo(),(t=function(){var e;return(e=no())===a&&(e=oo())===a&&(e=so())===a&&(e=uo())===a&&(e=lo())===a&&(e=co())===a&&(e=ao())===a&&(e=io()),e}())!==a?(yo(),Ri()!==a?(yo(),(r=ka())!==a?(yo(),go()!==a?(Ma=e,e=Er(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e}())===a&&(e=function(){var e,t,r,n,i,o,s;return e=Aa,Ji()!==a?(yo(),Io()!==a?(yo(),(t=ka())!==a?(yo(),Ri()!==a?(yo(),(r=ka())!==a?(yo(),n=Aa,(i=Ui())!==a?(o=yo(),(s=ka())!==a?n=i=[i,o,s,yo()]:(Aa=n,n=a)):(Aa=n,n=a),n===a&&(n=null),(i=go())!==a?(Ma=e,e=Fr(t,r,n)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e}())===a&&(e=function(){var e,t,r,n;return e=Aa,$i()!==a?(yo(),Io()!==a?(yo(),(t=ui())===a&&(t=null),yo(),(r=ka())!==a?(yo(),Ri()!==a?(yo(),(n=ka())!==a?(yo(),go()!==a?(Ma=e,e=zr(t,r,n)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,$i()!==a?(yo(),Io()!==a?(yo(),(t=ui())===a&&(t=null),yo(),(r=ka())!==a?(yo(),go()!==a?(Ma=e,e=Zr(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)),e}())===a&&(e=function(){var e,t,r;return e=Aa,zi()!==a?(yo(),Io()!==a?(yo(),(t=ka())!==a?(yo(),Ai()!==a?(yo(),(r=ka())!==a?(yo(),go()!==a?(Ma=e,e=kr(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e}())===a&&(e=function(){var e,t,r;return e=Aa,Bi()!==a?(yo(),Io()!==a?(yo(),(t=ka())!==a?(yo(),Qi()!==a?(yo(),(r=function(){var e,t,r;return e=Aa,(t=Gi())!==a&&(Ma=e,t=Pr()),(e=t)===a&&(e=Aa,(t=Wi())!==a&&(Ma=e,t=_r()),(e=t)===a&&(e=Aa,(t=Ki())!==a&&(Ma=e,t=Lr()),(e=t)===a&&(e=Aa,(t=Xi())!==a&&(Ma=e,t=Rr()),(e=t)===a&&(e=Aa,(t=ki())!==a&&(Ma=e,t=Ur()),(e=t)===a&&(e=Aa,(t=Zi())!==a&&(Ma=e,t=Jr()),(e=t)===a&&(e=Aa,(t=Hi())!==a&&(Ma=e,t=Vr()),(e=t)===a&&(e=Aa,(t=eo())!==a?(yo(),Io()!==a?(yo(),(r=Ni())!==a?(yo(),go()!==a?(Ma=e,e=$r(r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)))))))),e}())!==a?(yo(),go()!==a?(Ma=e,e=Dr(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e}())===a&&(e=function(){var e,t,r;return e=Aa,(t=No())!==a?(yo(),Io()!==a?(yo(),(r=Za())===a&&(r=null),yo(),go()!==a?(Ma=e,e=Hr(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e}())===a&&(e=function(){var e;return(e=function(){var e,t,r,n,i;if(e=Aa,fo()!==a)if(yo(),(t=ka())!==a){for(yo(),r=[],n=wi();n!==a;)r.push(n),n=wi();n=yo(),(i=po())!==a?(Ma=e,e=Tn(t,r)):(Aa=e,e=a)}else Aa=e,e=a;else Aa=e,e=a;if(e===a)if(e=Aa,fo()!==a)if(yo(),(t=ka())!==a){for(yo(),r=[],n=wi();n!==a;)r.push(n),n=wi();n=yo(),(i=Ii())!==a?(yo(),po()!==a?(Ma=e,e=Nn(t,r,i)):(Aa=e,e=a)):(Aa=e,e=a)}else Aa=e,e=a;else Aa=e,e=a;return e}())===a&&(e=function(){var e,t,r,n;if(e=Aa,fo()!==a){for(yo(),t=[],r=mi();r!==a;)t.push(r),r=mi();r=yo(),(n=po())!==a?(Ma=e,e=Sn(t)):(Aa=e,e=a)}else Aa=e,e=a;if(e===a)if(e=Aa,fo()!==a){for(yo(),t=[],r=mi();r!==a;)t.push(r),r=mi();r=yo(),(n=Ii())!==a?(yo(),po()!==a?(Ma=e,e=On(t,n)):(Aa=e,e=a)):(Aa=e,e=a)}else Aa=e,e=a;return e}()),e}())===a&&(e=function(){var e,t;return e=Aa,(t=function(){var e,t;return e=Aa,(t=function(){var e,t,r,n;if(e=Aa,(t=ti())!==a){for(r=[],n=ni();n!==a;)r.push(n),n=ni();Ma=e,e=Or(t,r)}else Aa=e,e=a;return e}())!==a&&(Ma=e,t=Sr(t)),t}())!==a&&(Ma=e,t=Tr(t)),(e=t)===a&&(e=Aa,(t=function(){var e,t;return e=Aa,oi()!==a?(t=function(){var e,t,r;for(e=Aa,t=[],r=ai();r!==a;)t.push(r),r=ai();return Ma=e,Cr(t)}(),oi()!==a?(Ma=e,e=br(t)):(Aa=e,e=a)):(Aa=e,e=a),e}())!==a&&(Ma=e,t=Nr(t)),e=t),e}())===a&&(e=si())===a&&(e=Aa,Io()!==a?(yo(),(t=ka())!==a?(yo(),go()!==a?(Ma=e,e=yr(t)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)),e}function ei(){var e,t,r,n;if(e=Aa,(t=ti())!==a){for(r=[],n=ri();n!==a;)r.push(n),n=ri();Ma=e,e=xr(t,r)}else Aa=e,e=a;return e}function ti(){var e;return Te.test(t.charAt(Aa))?(e=t.charAt(Aa),Aa++):(e=a,0===Pa&&Va(He)),e}function ri(){var e;return Ne.test(t.charAt(Aa))?(e=t.charAt(Aa),Aa++):(e=a,0===Pa&&Va(qe)),e}function ni(){var e;return Se.test(t.charAt(Aa))?(e=t.charAt(Aa),Aa++):(e=a,0===Pa&&Va(je)),e}function ai(){var e;return(e=ii())===a&&(e=function(){var e;return e=Aa,oi()!==a&&oi()!==a?(Ma=e,e=Ar()):(Aa=e,e=a),e}()),e}function ii(){var e;return Se.test(t.charAt(Aa))?(e=t.charAt(Aa),Aa++):(e=a,0===Pa&&Va(je)),e}function oi(){var e;return Oe.test(t.charAt(Aa))?(e=t.charAt(Aa),Aa++):(e=a,0===Pa&&Va(Ye)),e}function si(){var e,r,n,i;return e=Aa,r=Aa,64===t.charCodeAt(Aa)?(n=T,Aa++):(n=a,0===Pa&&Va(Be)),n!==a&&(i=ei())!==a?r=n=[n,i]:(Aa=r,r=a),r!==a&&(Ma=e,r=Mr(r)),r}function ui(){var e;return(e=qi())===a&&(e=ji())===a&&(e=Yi()),e}function li(){var e,r,n,i;return e=Aa,ro()!==a?(yo(),45===t.charCodeAt(Aa)?(r=w,Aa++):(r=a,0===Pa&&Va($e)),r===a&&(43===t.charCodeAt(Aa)?(r=m,Aa++):(r=a,0===Pa&&Va(Ve))),r!==a?(yo(),(n=vi())!==a?(yo(),(i=ci())!==a?(Ma=e,e=Yr(r,n,i)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,ro()!==a?(yo(),(r=vi())!==a?(yo(),(n=ci())!==a?(Ma=e,e=Br(r,n)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)),e}function ci(){var e,t,r;return e=Aa,(t=function(){var e,t,r;return e=Aa,(t=fi())!==a?(yo(),Io()!==a?(yo(),(r=pi())!==a?(yo(),go()!==a?(Ma=e,e=Gr(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=fi())!==a&&(Ma=e,t=Wr(t)),e=t),e}())!==a?(yo(),to()!==a?(yo(),(r=function(){var e,t,r,n;return e=Aa,(t=fi())!==a&&(Ma=e,t=Kr(t)),(e=t)===a&&(e=Aa,(t=co())!==a?(yo(),Io()!==a?(yo(),(r=pi())!==a?(yo(),wo()!==a?(yo(),(n=di())!==a?(yo(),go()!==a?(Ma=e,e=Xr(r,n)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=co())!==a?(yo(),Io()!==a?(yo(),(r=pi())!==a?(yo(),go()!==a?(Ma=e,e=en(r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=co())!==a&&(Ma=e,t=tn()),e=t))),e}())!==a?(Ma=e,e=Qr(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=function(){var e,t,r,n;return e=Aa,(t=fi())!==a?(yo(),Io()!==a?(yo(),(r=di())!==a?(yo(),go()!==a?(Ma=e,e=rn(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=fi())!==a&&(Ma=e,t=nn(t)),(e=t)===a&&(e=Aa,(t=co())!==a?(yo(),Io()!==a?(yo(),(r=pi())!==a?(yo(),wo()!==a?(yo(),(n=di())!==a?(yo(),go()!==a?(Ma=e,e=an(r,n)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=co())!==a?(yo(),Io()!==a?(yo(),(r=di())!==a?(yo(),go()!==a?(Ma=e,e=on(r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e===a&&(e=Aa,(t=co())!==a&&(Ma=e,t=sn()),e=t)))),e}()),e}function fi(){var e,t;return e=Aa,(t=so())!==a&&(Ma=e,t=un()),(e=t)===a&&(e=Aa,(t=uo())!==a&&(Ma=e,t=ln()),(e=t)===a&&(e=Aa,(t=lo())!==a&&(Ma=e,t=cn()),(e=t)===a&&(e=Aa,(t=oo())!==a&&(Ma=e,t=fn()),(e=t)===a&&(e=Aa,(t=no())!==a&&(Ma=e,t=dn()),e=t)))),e}function di(){var e,t;return e=Aa,(t=Ni())!==a&&(Ma=e,t=pn(t)),t}function pi(){var e,t;return e=Aa,(t=Ni())!==a&&(Ma=e,t=vn(t)),t}function vi(){var e;return(e=hi())===a&&(e=si()),e}function hi(){var e,r,n,i,o;if(e=Aa,39===t.charCodeAt(Aa)?(r=N,Aa++):(r=a,0===Pa&&Va(Qe)),r===a&&(t.substr(Aa,2)===S?(r=S,Aa+=2):(r=a,0===Pa&&Va(Ge))),r!==a){for(n=[],i=Aa,t.substr(Aa,2)===O?(o=O,Aa+=2):(o=a,0===Pa&&Va(We)),o!==a&&(Ma=i,o=gn()),(i=o)===a&&(xe.test(t.charAt(Aa))?(i=t.charAt(Aa),Aa++):(i=a,0===Pa&&Va(Ke)));i!==a;)n.push(i),i=Aa,t.substr(Aa,2)===O?(o=O,Aa+=2):(o=a,0===Pa&&Va(We)),o!==a&&(Ma=i,o=gn()),(i=o)===a&&(xe.test(t.charAt(Aa))?(i=t.charAt(Aa),Aa++):(i=a,0===Pa&&Va(Ke)));39===t.charCodeAt(Aa)?(i=N,Aa++):(i=a,0===Pa&&Va(Qe)),i!==a?(Ma=e,e=yn(n)):(Aa=e,e=a)}else Aa=e,e=a;return e}function mi(){var e,t,r;return e=Aa,vo()!==a?(yo(),(t=ka())!==a?(yo(),ho()!==a?(yo(),(r=ka())!==a?(Ma=e,e=xn(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e}function wi(){var e,t,r;return e=Aa,vo()!==a?(yo(),(t=ka())!==a?(yo(),ho()!==a?(yo(),(r=ka())!==a?(Ma=e,e=bn(t,r)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a)):(Aa=e,e=a),e}function Ii(){var e,t;return e=Aa,mo()!==a?(yo(),(t=ka())!==a?(Ma=e,e=Cn(t)):(Aa=e,e=a)):(Aa=e,e=a),e}function gi(){var e,r,n;return(e=Ni())===a&&(e=Aa,45===t.charCodeAt(Aa)?(r=w,Aa++):(r=a,0===Pa&&Va($e)),r===a&&(43===t.charCodeAt(Aa)?(r=m,Aa++):(r=a,0===Pa&&Va(Ve))),r!==a&&(n=Ni())!==a?(Ma=e,e=Pn(r,n)):(Aa=e,e=a)),e}function yi(){var e,r,n;return e=Aa,46===t.charCodeAt(Aa)?(r=x,Aa++):(r=a,0===Pa&&Va(Xe)),r!==a?((n=Ni())===a&&(n=null),Ma=e,e=_n(n)):(Aa=e,e=a),e}function Ti(){var e,t,r;return e=Aa,(t=Oi())!==a&&(r=Ni())!==a?(Ma=e,e=Ln(t,r)):(Aa=e,e=a),e}function Ni(){var e,t,r;if(e=Aa,t=[],(r=Si())!==a)for(;r!==a;)t.push(r),r=Si();else t=a;return t!==a&&(Ma=e,t=Rn(t)),t}function Si(){var e;return be.test(t.charAt(Aa))?(e=t.charAt(Aa),Aa++):(e=a,0===Pa&&Va(et)),e}function Oi(){var e,r,n;return e=Aa,Ce.test(t.charAt(Aa))?(r=t.charAt(Aa),Aa++):(r=a,0===Pa&&Va(tt)),r!==a?(Ae.test(t.charAt(Aa))?(n=t.charAt(Aa),Aa++):(n=a,0===Pa&&Va(rt)),n===a&&(n=null),Ma=e,e=Un(r,n)):(Aa=e,e=a),e}function xi(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===b?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(nt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?e=r=[r,n]:(Aa=e,e=a)):(Aa=e,e=a),e}function bi(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===C?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(at)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?e=r=[r,n]:(Aa=e,e=a)):(Aa=e,e=a),e}function Ci(){var e,r,n,i;return e=Aa,t.substr(Aa,5).toLowerCase()===A?(r=t.substr(Aa,5),Aa+=5):(r=a,0===Pa&&Va(it)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?e=r=[r,n]:(Aa=e,e=a)):(Aa=e,e=a),e}function Ai(){var e,r,n,i;return e=Aa,t.substr(Aa,2).toLowerCase()===M?(r=t.substr(Aa,2),Aa+=2):(r=a,0===Pa&&Va(ot)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Jn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Mi(){var e,r,n,i;return e=Aa,t.substr(Aa,2).toLowerCase()===E?(r=t.substr(Aa,2),Aa+=2):(r=a,0===Pa&&Va(st)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Vn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Ei(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===F?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(ut)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=$n()):(Aa=e,e=a)):(Aa=e,e=a),e}function Fi(){var e,r,n,i;return e=Aa,t.substr(Aa,6).toLowerCase()===D?(r=t.substr(Aa,6),Aa+=6):(r=a,0===Pa&&Va(lt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=zn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Di(){var e,r,n,i;return e=Aa,t.substr(Aa,3).toLowerCase()===P?(r=t.substr(Aa,3),Aa+=3):(r=a,0===Pa&&Va(ct)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Zn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Pi(){var e,r,n,i;return e=Aa,t.substr(Aa,3).toLowerCase()===_?(r=t.substr(Aa,3),Aa+=3):(r=a,0===Pa&&Va(ft)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=kn()):(Aa=e,e=a)):(Aa=e,e=a),e}function _i(){var e,r,n,i;return e=Aa,t.substr(Aa,2).toLowerCase()===L?(r=t.substr(Aa,2),Aa+=2):(r=a,0===Pa&&Va(dt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Hn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Li(){var e,r,n,i;return e=Aa,t.substr(Aa,7).toLowerCase()===R?(r=t.substr(Aa,7),Aa+=7):(r=a,0===Pa&&Va(pt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=qn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Ri(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===U?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(vt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=jn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Ui(){var e,r,n,i;return e=Aa,t.substr(Aa,3).toLowerCase()===J?(r=t.substr(Aa,3),Aa+=3):(r=a,0===Pa&&Va(ht)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Yn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Ji(){var e,r,n,i;return e=Aa,t.substr(Aa,9).toLowerCase()===V?(r=t.substr(Aa,9),Aa+=9):(r=a,0===Pa&&Va(mt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Bn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Vi(){var e,r,n,i;return e=Aa,t.substr(Aa,7).toLowerCase()===$?(r=t.substr(Aa,7),Aa+=7):(r=a,0===Pa&&Va(wt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Qn()):(Aa=e,e=a)):(Aa=e,e=a),e}function $i(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===z?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(It)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Gn()):(Aa=e,e=a)):(Aa=e,e=a),e}function zi(){var e,r,n,i;return e=Aa,t.substr(Aa,8).toLowerCase()===Z?(r=t.substr(Aa,8),Aa+=8):(r=a,0===Pa&&Va(gt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Wn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Zi(){var e,r,n,i;return e=Aa,t.substr(Aa,9).toLowerCase()===k?(r=t.substr(Aa,9),Aa+=9):(r=a,0===Pa&&Va(yt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Kn()):(Aa=e,e=a)):(Aa=e,e=a),e}function ki(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===H?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(Tt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Xn()):(Aa=e,e=a)):(Aa=e,e=a),e}function Hi(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===q?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(Nt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ea()):(Aa=e,e=a)):(Aa=e,e=a),e}function qi(){var e,r,n,i;return e=Aa,t.substr(Aa,7).toLowerCase()===j?(r=t.substr(Aa,7),Aa+=7):(r=a,0===Pa&&Va(St)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ta()):(Aa=e,e=a)):(Aa=e,e=a),e}function ji(){var e,r,n,i;return e=Aa,t.substr(Aa,8).toLowerCase()===Y?(r=t.substr(Aa,8),Aa+=8):(r=a,0===Pa&&Va(Ot)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ra()):(Aa=e,e=a)):(Aa=e,e=a),e}function Yi(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===B?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(xt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=na()):(Aa=e,e=a)):(Aa=e,e=a),e}function Bi(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===Q?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(bt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=aa()):(Aa=e,e=a)):(Aa=e,e=a),e}function Qi(){var e,r,n,i;return e=Aa,t.substr(Aa,2).toLowerCase()===G?(r=t.substr(Aa,2),Aa+=2):(r=a,0===Pa&&Va(Ct)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ia()):(Aa=e,e=a)):(Aa=e,e=a),e}function Gi(){var e,r,n,i;return e=Aa,t.substr(Aa,7).toLowerCase()===W?(r=t.substr(Aa,7),Aa+=7):(r=a,0===Pa&&Va(At)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=oa()):(Aa=e,e=a)):(Aa=e,e=a),e}function Wi(){var e,r,n,i;return e=Aa,t.substr(Aa,8).toLowerCase()===K?(r=t.substr(Aa,8),Aa+=8):(r=a,0===Pa&&Va(Mt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=sa()):(Aa=e,e=a)):(Aa=e,e=a),e}function Ki(){var e,r,n,i;return e=Aa,t.substr(Aa,5).toLowerCase()===X?(r=t.substr(Aa,5),Aa+=5):(r=a,0===Pa&&Va(Et)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ua()):(Aa=e,e=a)):(Aa=e,e=a),e}function Xi(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===ee?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(Ft)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=la()):(Aa=e,e=a)):(Aa=e,e=a),e}function eo(){var e,r,n,i;return e=Aa,t.substr(Aa,7).toLowerCase()===te?(r=t.substr(Aa,7),Aa+=7):(r=a,0===Pa&&Va(Dt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ca()):(Aa=e,e=a)):(Aa=e,e=a),e}function to(){var e,r,n,i;return e=Aa,t.substr(Aa,2).toLowerCase()===re?(r=t.substr(Aa,2),Aa+=2):(r=a,0===Pa&&Va(Pt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=fa()):(Aa=e,e=a)):(Aa=e,e=a),e}function ro(){var e,r,n,i;return e=Aa,t.substr(Aa,8).toLowerCase()===ne?(r=t.substr(Aa,8),Aa+=8):(r=a,0===Pa&&Va(_t)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=da()):(Aa=e,e=a)):(Aa=e,e=a),e}function no(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===ae?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(Lt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=pa()):(Aa=e,e=a)):(Aa=e,e=a),e}function ao(){var e,r,n,i;return e=Aa,t.substr(Aa,13).toLowerCase()===ie?(r=t.substr(Aa,13),Aa+=13):(r=a,0===Pa&&Va(Rt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=va()):(Aa=e,e=a)):(Aa=e,e=a),e}function io(){var e,r,n,i;return e=Aa,t.substr(Aa,15).toLowerCase()===oe?(r=t.substr(Aa,15),Aa+=15):(r=a,0===Pa&&Va(Ut)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ha()):(Aa=e,e=a)):(Aa=e,e=a),e}function oo(){var e,r,n,i;return e=Aa,t.substr(Aa,5).toLowerCase()===se?(r=t.substr(Aa,5),Aa+=5):(r=a,0===Pa&&Va(Jt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ma()):(Aa=e,e=a)):(Aa=e,e=a),e}function so(){var e,r,n,i;return e=Aa,t.substr(Aa,3).toLowerCase()===ue?(r=t.substr(Aa,3),Aa+=3):(r=a,0===Pa&&Va(Vt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=wa()):(Aa=e,e=a)):(Aa=e,e=a),e}function uo(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===le?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va($t)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Ia()):(Aa=e,e=a)):(Aa=e,e=a),e}function lo(){var e,r,n,i;return e=Aa,t.substr(Aa,6).toLowerCase()===ce?(r=t.substr(Aa,6),Aa+=6):(r=a,0===Pa&&Va(zt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ga()):(Aa=e,e=a)):(Aa=e,e=a),e}function co(){var e,r,n,i;return e=Aa,t.substr(Aa,6).toLowerCase()===fe?(r=t.substr(Aa,6),Aa+=6):(r=a,0===Pa&&Va(Zt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=ya()):(Aa=e,e=a)):(Aa=e,e=a),e}function fo(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===de?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(kt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Ta()):(Aa=e,e=a)):(Aa=e,e=a),e}function po(){var e,r,n,i;return e=Aa,t.substr(Aa,3).toLowerCase()===pe?(r=t.substr(Aa,3),Aa+=3):(r=a,0===Pa&&Va(Ht)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Na()):(Aa=e,e=a)):(Aa=e,e=a),e}function vo(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===ve?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(qt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Sa()):(Aa=e,e=a)):(Aa=e,e=a),e}function ho(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===he?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(jt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=Oa()):(Aa=e,e=a)):(Aa=e,e=a),e}function mo(){var e,r,n,i;return e=Aa,t.substr(Aa,4).toLowerCase()===me?(r=t.substr(Aa,4),Aa+=4):(r=a,0===Pa&&Va(Yt)),r!==a?(n=Aa,Pa++,i=ri(),Pa--,i===a?n=void 0:(Aa=n,n=a),n!==a?(Ma=e,e=xa()):(Aa=e,e=a)):(Aa=e,e=a),e}function wo(){var e;return 44===t.charCodeAt(Aa)?(e=we,Aa++):(e=a,0===Pa&&Va(Bt)),e}function Io(){var e;return 40===t.charCodeAt(Aa)?(e=Ie,Aa++):(e=a,0===Pa&&Va(Qt)),e}function go(){var e;return 41===t.charCodeAt(Aa)?(e=ge,Aa++):(e=a,0===Pa&&Va(Gt)),e}function yo(){var e,t;for(e=[],t=To();t!==a;)e.push(t),t=To();return e}function To(){var e;return Me.test(t.charAt(Aa))?(e=t.charAt(Aa),Aa++):(e=a,0===Pa&&Va(Wt)),e}function No(){var e,r,n,i;if(e=Aa,(r=ei())!==a&&(Ma=e,r=ba(r)),(e=r)===a)if(e=Aa,96===t.charCodeAt(Aa)?(r=ye,Aa++):(r=a,0===Pa&&Va(Kt)),r!==a){if(n=[],Ee.test(t.charAt(Aa))?(i=t.charAt(Aa),Aa++):(i=a,0===Pa&&Va(Xt)),i!==a)for(;i!==a;)n.push(i),Ee.test(t.charAt(Aa))?(i=t.charAt(Aa),Aa++):(i=a,0===Pa&&Va(Xt));else n=a;n!==a?(96===t.charCodeAt(Aa)?(i=ye,Aa++):(i=a,0===Pa&&Va(Kt)),i!==a?(Ma=e,e=Ca(n)):(Aa=e,e=a)):(Aa=e,e=a)}else Aa=e,e=a;return e}function So(e,t,r,n){var a={type:"binary-expression",operator:e,left:t,right:r};return void 0!==n&&(a.escape=n),a}function Oo(e,t){for(var r=e,n=0;n<t.length;n++)r=So(t[n][1],r,t[n][3]);return r}if((n=s())!==a&&Aa===t.length)return n;throw n!==a&&Aa<t.length&&Va({type:"end"}),function(t,r,n){return new e(e.buildMessage(t,r),t,r,n)}(Da,Fa<t.length?t.charAt(Fa):null,Fa<t.length?Ja(Fa,Fa+1):Ja(Fa,Fa))}}},(de=ve).exports&&(de.exports=pe());var he=ve.exports;class me{static parse(e){return he.parse(e)}}const we=new Set(["current_timestamp","current_date","current_time"]);class Ie{static makeBool(e){return ye(e)}static featureValue(e,t,r,n){return Me(e,t,r,n)}static equalsNull(e){return null===e}static applyLike(e,t,r){return Ae(e,t,r)}static ensureArray(e){return Te(e)}static applyIn(e,t){return xe(e,t)}static currentDate(e){return r.fromNow(e)}static makeSqlInterval(e,t,r){return C.createFromValueAndQualifier(e,t,r)}static convertInterval(e){return e instanceof C?e.valueInMilliseconds():e}static currentTimestamp(e){return R(new Date,e)}static compare(e,t,r,n){return te(t,r,e)}static calculate(e,t,r,n){return ce(e,t,r,n)}static evaluateTime(e){return q(e)}static evaluateTimestamp(e,t,r){return j(e,t,r)}static evaluateDate(e,t){return Y(e,t)}static evaluateFunction(e,t,r){return ie(e,t,r)}static lookup(e,t){const r=t[e];return void 0===r?null:r}static between(e,t,r){return null==e||null==t[0]||null==t[1]?null:te(e,t[0],">=")&&te(e,t[1],"<=")}static notbetween(e,t,r){return null==e||null==t[0]||null==t[1]?null:te(e,t[0],"<")||te(e,t[1],">")}static ternaryNot(e){return Ne(e)}static ternaryAnd(e,t){return Se(e,t)}static ternaryOr(e,t){return Oe(e,t)}}let ge=class e{constructor(e,t,r="UTC"){this.fieldsIndex=t,this.timeZone=r,this.parameters={},this._hasDateFunctions=void 0,this.parseTree=me.parse(e);const{isStandardized:n,isAggregate:a,referencedFieldNames:i}=this._extractExpressionInfo(t);this._referencedFieldNames=i,this.isStandardized=n,this.isAggregate=a}static convertValueToStorageFormat(e,t=null){if(null===t)return $(e)?e.getTime():z(e)?e.toMillis():H(e)?e.toStorageFormat():k(e)?e.toStorageString():Z(e)?e.toStorageFormat():e;switch(t){case"date":return $(e)?e.getTime():z(e)?e.toMillis():H(e)?e.toMilliseconds():Z(e)?e.toNumber():e;case"date-only":return $(e)?r.fromDateJS(e).toString():H(e)?r.fromSqlTimeStampOffset(e).toString():z(e)?r.fromDateTime(e).toString():e;case"time-only":return $(e)?n.fromDateJS(e).toStorageString():z(e)?n.fromDateTime(e).toStorageString():H(e)?n.fromSqlTimeStampOffset(e).toStorageString():k(e)?e.toStorageString():e;case"timestamp-offset":if($(e))return y.fromJSDate(e).toStorageFormat();if(z(e))return y.fromDateTime(e).toStorageFormat();if(H(e))return e.toStorageFormat()}return e}static create(t,r,n="UTC"){return new e(t,r,n)}get fieldNames(){return this._referencedFieldNames}testSet(e,t=Ee){return!!this._evaluateNode(this.parseTree,null,t,e)}calculateValue(e,t=Ee){const r=this._evaluateNode(this.parseTree,e,t,null);return r instanceof C?r.valueInMilliseconds()/864e5:r}calculateValueCompiled(e,t=Ee){return null!=this.parseTree._compiledVersion?this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone):d("esri-csp-restrictions")?this.calculateValue(e,t):(this._compileMe(),this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone))}testFeature(e,t=Ee){return!!this._evaluateNode(this.parseTree,e,t,null)}testFeatureCompiled(e,t=Ee){return null!=this.parseTree._compiledVersion?!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone):d("esri-csp-restrictions")?this.testFeature(e,t):(this._compileMe(),!!this.parseTree._compiledVersion(e,this.parameters,t,this.fieldsIndex,this.timeZone))}get hasDateFunctions(){return null!=this._hasDateFunctions||(this._hasDateFunctions=!1,this._visitAll(this.parseTree,(e=>{"current-time"===e.type?this._hasDateFunctions=!0:"function"===e.type&&(this._hasDateFunctions=this._hasDateFunctions||we.has(e.name.toLowerCase()))}))),this._hasDateFunctions}getFunctions(){const e=new Set;return this._visitAll(this.parseTree,(t=>{"function"===t.type&&e.add(t.name.toLowerCase())})),Array.from(e)}getExpressions(){const e=new Map;return this._visitAll(this.parseTree,(t=>{if("function"===t.type){const r=t.name.toLowerCase(),n=t.args.value[0];if("column-reference"===n.type){const t=n.column,a=`${r}-${t}`;e.has(a)||e.set(a,{aggregateType:r,field:t})}}})),[...e.values()]}getVariables(){const e=new Set;return this._visitAll(this.parseTree,(t=>{"parameter"===t.type&&e.add(t.value.toLowerCase())})),Array.from(e)}_compileMe(){const e="return this.convertInterval("+this.evaluateNodeToJavaScript(this.parseTree)+")";this.parseTree._compiledVersion=new Function("feature","lookups","attributeAdapter","fieldsIndex","timeZone",e).bind(Ie)}_extractExpressionInfo(e){const t=[],r=new Set;let n=!0,a=!1;return this._visitAll(this.parseTree,(i=>{switch(i.type){case"column-reference":{const n=e?.get(i.column);let a,o;n?a=o=n.name??"":(o=i.column,a=o.toLowerCase()),r.has(a)||(r.add(a),t.push(o)),i.column=o;break}case"function":{const{name:e,args:t}=i,r=t.value.length;n&&(n=function(e,t){const r=le[e.toLowerCase()];return null!=r&&t>=r.minParams&&t<=r.maxParams}(e,r)),!1===a&&(a=T(e,r));break}}})),{referencedFieldNames:Array.from(t),isStandardized:n,isAggregate:a}}_visitAll(e,t){if(null!=e)switch(t(e),e.type){case"when-clause":this._visitAll(e.operand,t),this._visitAll(e.value,t);break;case"case-expression":for(const r of e.clauses)this._visitAll(r,t);"simple"===e.format&&this._visitAll(e.operand,t),null!==e.else&&this._visitAll(e.else,t);break;case"expression-list":for(const r of e.value)this._visitAll(r,t);break;case"unary-expression":this._visitAll(e.expr,t);break;case"binary-expression":this._visitAll(e.left,t),this._visitAll(e.right,t);break;case"function":this._visitAll(e.args,t)}}evaluateNodeToJavaScript(e){switch(e.type){case"interval":return"this.makeSqlInterval("+this.evaluateNodeToJavaScript(e.value)+", "+JSON.stringify(e.qualifier)+","+JSON.stringify(e.op)+")";case"case-expression":{let t="";if("simple"===e.format){const r=this.evaluateNodeToJavaScript(e.operand);t="( ";for(let n=0;n<e.clauses.length;n++)t+=" (this.compare('=',"+r+","+this.evaluateNodeToJavaScript(e.clauses[n].operand)+") ? ("+this.evaluateNodeToJavaScript(e.clauses[n].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}else{t="( ";for(let r=0;r<e.clauses.length;r++)t+=" this.makeBool("+this.evaluateNodeToJavaScript(e.clauses[r].operand)+")===true ? ("+this.evaluateNodeToJavaScript(e.clauses[r].value)+") : ";null!==e.else?t+=this.evaluateNodeToJavaScript(e.else):t+="null",t+=" )"}return t}case"parameter":return"this.lookup("+JSON.stringify(e.value.toLowerCase())+",lookups)";case"expression-list":{let t="[";for(const r of e.value)"["!==t&&(t+=","),t+=this.evaluateNodeToJavaScript(r);return t+="]",t}case"unary-expression":return"this.ternaryNot("+this.evaluateNodeToJavaScript(e.expr)+")";case"binary-expression":switch(e.operator){case"AND":return"this.ternaryAnd("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"OR":return"this.ternaryOr("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+" )";case"IS":if("null"!==e.right.type)throw new h(t.UnsupportedIsRhs);return"this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")";case"ISNOT":if("null"!==e.right.type)throw new h(t.UnsupportedIsRhs);return"(!(this.equalsNull("+this.evaluateNodeToJavaScript(e.left)+")))";case"IN":return"this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+"))";case"NOT IN":return"this.ternaryNot(this.applyIn("+this.evaluateNodeToJavaScript(e.left)+",this.ensureArray("+this.evaluateNodeToJavaScript(e.right)+")))";case"BETWEEN":return"this.between("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"NOTBETWEEN":return"this.notbetween("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"LIKE":return"this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+")";case"NOT LIKE":return"this.ternaryNot(this.applyLike("+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+","+JSON.stringify(e.escape)+"))";case"<>":case"<":case">":case">=":case"<=":case"=":return"this.compare("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)";case"*":case"-":case"+":case"/":case"||":return"this.calculate("+JSON.stringify(e.operator)+","+this.evaluateNodeToJavaScript(e.left)+","+this.evaluateNodeToJavaScript(e.right)+", timeZone)"}throw new h(t.UnsupportedOperator,{operator:e.operator});case"null":case"boolean":case"string":case"number":return JSON.stringify(e.value);case"time":return"this.evaluateTime(JSON.stringify(node.value))";case"date":return"this.evaluateDate(JSON.stringify(node.value), 'unknown')";case"timestamp":return"this.evaluateTimestamp(JSON.stringify(node.value), 'unknown')";case"current-time":return"date"===e.mode?"this.currentDate(timeZone)":"this.currentTimestamp(timeZone)";case"column-reference":return"this.featureValue(feature,"+JSON.stringify(e.column)+",fieldsIndex,attributeAdapter)";case"function":return"this.evaluateFunction("+JSON.stringify(e.name)+","+this.evaluateNodeToJavaScript(e.args)+", timeZone)"}throw new h(t.UnsupportedSyntax,{node:e.type})}_evaluateNode(e,n,i,s){let u;switch(e.type){case"interval":{const t=this._evaluateNode(e.value,n,i,s);return C.createFromValueAndQualifier(t,e.qualifier,e.op)}case"case-expression":if("simple"===e.format){const t=this._evaluateNode(e.operand,n,i,s);for(let r=0;r<e.clauses.length;r++)if(te(t,this._evaluateNode(e.clauses[r].operand,n,i,s),"=",this.timeZone))return this._evaluateNode(e.clauses[r].value,n,i,s);if(null!==e.else)return this._evaluateNode(e.else,n,i,s)}else{for(let t=0;t<e.clauses.length;t++)if(ye(this._evaluateNode(e.clauses[t].operand,n,i,s)))return this._evaluateNode(e.clauses[t].value,n,i,s);if(null!==e.else)return this._evaluateNode(e.else,n,i,s)}return null;case"parameter":return u=this.parameters[e.value.toLowerCase()],$(u)?o.fromJSDate(u):u instanceof a?u.toDateTime():u;case"expression-list":{const t=[];for(const r of e.value)t.push(this._evaluateNode(r,n,i,s));return t}case"unary-expression":return Ne(this._evaluateNode(e.expr,n,i,s));case"binary-expression":switch(e.operator){case"AND":return Se(this._evaluateNode(e.left,n,i,s),this._evaluateNode(e.right,n,i,s));case"OR":return Oe(this._evaluateNode(e.left,n,i,s),this._evaluateNode(e.right,n,i,s));case"IS":if("null"!==e.right.type)throw new h(t.UnsupportedIsRhs);return null===this._evaluateNode(e.left,n,i,s);case"ISNOT":if("null"!==e.right.type)throw new h(t.UnsupportedIsRhs);return null!==this._evaluateNode(e.left,n,i,s);case"IN":{const t=Te(this._evaluateNode(e.right,n,i,s));return xe(this._evaluateNode(e.left,n,i,s),t)}case"NOT IN":{const t=Te(this._evaluateNode(e.right,n,i,s));return Ne(xe(this._evaluateNode(e.left,n,i,s),t))}case"BETWEEN":{const t=this._evaluateNode(e.left,n,i,s),r=this._evaluateNode(e.right,n,i,s);return null==t||null==r[0]||null==r[1]?null:te(t,r[0],">=",this.timeZone)&&te(t,r[1],"<=",this.timeZone)}case"NOTBETWEEN":{const t=this._evaluateNode(e.left,n,i,s),r=this._evaluateNode(e.right,n,i,s);return null==t||null==r[0]||null==r[1]?null:te(t,r[0],"<",this.timeZone)||te(t,r[1],">",this.timeZone)}case"LIKE":return Ae(this._evaluateNode(e.left,n,i,s),this._evaluateNode(e.right,n,i,s),e.escape);case"NOT LIKE":return Ne(Ae(this._evaluateNode(e.left,n,i,s),this._evaluateNode(e.right,n,i,s),e.escape));case"<>":case"<":case">":case">=":case"<=":case"=":return te(this._evaluateNode(e.left,n,i,s),this._evaluateNode(e.right,n,i,s),e.operator,this.timeZone);case"-":case"+":case"*":case"/":case"||":return ce(e.operator,this._evaluateNode(e.left,n,i,s),this._evaluateNode(e.right,n,i,s),this.timeZone)}case"null":case"boolean":case"string":case"number":return e.value;case"date":return e.parsedValue??=Y(e.value,"unknown"),e.parsedValue;case"timestamp":return e.parsedValue??=j(e.value,"unknown"),e.parsedValue;case"time":return q(e.value);case"current-time":return"date"===e.mode?r.fromNow(this.timeZone):R(new Date,this.timeZone);case"column-reference":return Me(n,e.column,this.fieldsIndex,i);case"data-type":return e.value;case"function":{if(this.isAggregate&&T(e.name,e.args.value.length)){const r=[];for(const t of e.args?.value||[]){const e=[];for(const r of s||[])e.push(this._evaluateNode(t,r,i,null));r.push(e)}return function(e,r){const n=N[e.toLowerCase()];if(null==n)throw new h(t.FunctionNotRecognized);if(r.length<n.minParams||r.length>n.maxParams)throw new h(t.InvalidParameterCount,{name:e.toUpperCase()});return n.evaluate(r)}(e.name,r)}const r=this._evaluateNode(e.args,n,i,s);return ie(e.name,r,this.timeZone)}}throw new h(t.UnsupportedSyntax,{node:e.type})}};function ye(e){return!0===e}function Te(e){return Array.isArray(e)?e:[e]}function Ne(e){return null!==e?!0!==e:null}function Se(e,t){return null!=e&&null!=t?!0===e&&!0===t:!1!==e&&!1!==t&&null}function Oe(e,t){return null!=e&&null!=t?!0===e||!0===t:!0===e||!0===t||null}function xe(e,t){if(null==e)return null;let r=!1;for(const n of t)if(null==n)r=null;else if(e===n){r=!0;break}return r}e("x",ge);const be="-[]/{}()*+?.\\^$|";var Ce;function Ae(e,t,r){return null==e?null:function(e,t){const r=t;let n="",a=Ce.Normal;for(let i=0;i<e.length;i++){const t=e.charAt(i);switch(a){case Ce.Normal:t===r?a=Ce.Escaped:be.includes(t)?n+="\\"+t:n+="%"===t?".*":"_"===t?".":t;break;case Ce.Escaped:be.includes(t)?n+="\\"+t:n+=t,a=Ce.Normal}}return new RegExp("^"+n+"$","m")}(t,r).test(e)}function Me(e,t,a,i){const o=i.getAttribute(e,t),s=a?.get(t);return null==o||"esriFieldTypeDate"!==s?.type&&"date"!==s?.type?null==o||"esriFieldTypeDateOnly"!==s?.type&&"date-only"!==s?.type?null==o||"esriFieldTypeTimeOnly"!==s?.type&&"time-only"!==s?.type?null==o||"esriFieldTypeTimestampOffset"!==s?.type&&"timestamp-offset"!==s?.type?o:new y(o):n.fromReader(o):r.fromReader(o):R(new Date(o),a?.getLuxonTimeZone(s.name)??p.utcInstance)}!function(e){e[e.Normal=0]="Normal",e[e.Escaped=1]="Escaped"}(Ce||(Ce={}));const Ee={getAttribute:(e,t)=>(function(e){return e&&"object"==typeof e.attributes}(e)?e.attributes:e)[t]},Fe=Object.freeze(Object.defineProperty({__proto__:null,WhereClause:ge,defaultAttributeAdapter:Ee},Symbol.toStringTag,{value:"Module"}));e("W",Fe)}}}));
