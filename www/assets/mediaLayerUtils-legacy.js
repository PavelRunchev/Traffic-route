System.register(["./utils-legacy.js","./jsonContext-legacy.js","./index-legacy.js","./resourceUtils-legacy3.js","./originUtils-legacy.js","./multiOriginJSONSupportUtils-legacy.js","./saveAPIKeyUtils-legacy.js","./saveUtils-legacy.js","./resourceUtils-legacy2.js"],(function(e,t){"use strict";var r,s,a,n,l,i,u;return{setters:[e=>{r=e.$,s=e.j},e=>{a=e.o},e=>{n=e.l,l=e.b,i=e.f},e=>{u=e.p},null,null,null,null,null],execute:function(){e({save:async function(e,s){return r({layer:e,itemType:t,validateLayer:p,createJSONContext:e=>m(e),createItemData:d,errorNamePrefix:c,supplementalUnsupportedErrors:y,saveResources:(t,r)=>u(e.resourceReferences,r)},s)},saveAs:async function(e,r,a){return s({layer:e,itemType:t,validateLayer:p,createJSONContext:e=>m(e),createItemData:d,errorNamePrefix:o,supplementalUnsupportedErrors:y,newItem:r,setItemProperties:f,saveResources:(t,r)=>u(e.resourceReferences,r)},a)}});const t="Media Layer",c="media-layer-save",o="media-layer-save-as",y=["media-layer:unsupported-source"];function p(e){return{isValid:"media"===e.type,errorMessage:"Layer.type should be 'media'"}}function m(e){return a(e,"portal-item",!0)}function d(e){return e.layerJSON}async function f(e,t){const{title:r,fullExtent:s}=e;t.title||=r,t.extent=s?await n(s):null,l(t,i.METADATA)}}}}));
