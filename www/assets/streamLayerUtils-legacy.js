System.register(["./utils-legacy.js","./index-legacy.js","./originUtils-legacy.js","./multiOriginJSONSupportUtils-legacy.js","./jsonContext-legacy.js","./saveAPIKeyUtils-legacy.js","./saveUtils-legacy.js"],(function(e,t){"use strict";var r,a,l,s,n,i;return{setters:[e=>{r=e.$,a=e.j},e=>{l=e.l,s=e.b,n=e.f,i=e.i},null,null,null,null,null],execute:function(){e({save:async function(e,a){return r({layer:e,itemType:t,additionalItemType:u,validateLayer:o,createItemData:m,errorNamePrefix:c},a)},saveAs:async function(e,r,l){return a({layer:e,itemType:t,validateLayer:o,createItemData:m,errorNamePrefix:y,newItem:r,setItemProperties:g},l)}});const t="Stream Service",u="Feed",c="stream-layer-save",y="stream-layer-save-as";function o(e){return{isValid:"stream"===e.type&&!!e.url&&!e.webSocketUrl,errorMessage:"Stream layer should be created using a url to a stream service"}}function m(e){const t=e.layerJSON;return Promise.resolve(t&&Object.keys(t).length?t:null)}async function g(e,t){const{parsedUrl:r,title:a,fullExtent:u}=e;t.url=r.path,t.title||=a,t.extent=null,null!=u&&(t.extent=await l(u)),s(t,n.METADATA),i(t,n.SINGLE_LAYER)}}}}));
