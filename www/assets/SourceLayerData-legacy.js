System.register(["./GeometryUtils-legacy.js"],(function(e,t){"use strict";var s;return{setters:[e=>{s=e.h}],execute:function(){var t;!function(e){e[e.moveTo=1]="moveTo",e[e.lineTo=2]="lineTo",e[e.close=7]="close"}(t||(t={})),e("s",class{constructor(e,t,s=0){this.values={},this._geometry=void 0,this._pbfGeometry=null,this.featureIndex=s;const r=t.keys,a=t.values,n=e.asUnsafe();for(;n.next();)switch(n.tag()){case 1:this.id=n.getUInt64();break;case 2:{const e=n.getMessage().asUnsafe(),t=this.values;for(;!e.empty();){const s=e.getUInt32(),n=e.getUInt32();t[r[s]]=a[n]}e.release();break}case 3:this.type=n.getUInt32();break;case 4:this._pbfGeometry=n.getMessage();break;default:n.skip()}}getGeometry(e){if(void 0!==this._geometry)return this._geometry;if(!this._pbfGeometry)return null;const r=this._pbfGeometry.asUnsafe();let a,n;this._pbfGeometry=null,e?e.reset(this.type):a=[];let o,i=t.moveTo,c=0,u=0,l=0;for(;!r.empty();){if(0===c){const e=r.getUInt32();i=7&e,c=e>>3}switch(c--,i){case t.moveTo:u+=r.getSInt32(),l+=r.getSInt32(),e?e.moveTo(u,l):a&&(n&&a.push(n),n=[],n.push(new s(u,l)));break;case t.lineTo:u+=r.getSInt32(),l+=r.getSInt32(),e?e.lineTo(u,l):n&&n.push(new s(u,l));break;case t.close:e?e.close():n&&!n[0].equals(u,l)&&n.push(n[0].clone());break;default:throw r.release(),new Error("Invalid path operation")}}return e?o=e.result():a&&(n&&a.push(n),o=a),r.release(),this._geometry=o,o}});class r{constructor(e){this.extent=4096,this.keys=[],this.values=[],this._pbfLayer=e.clone();const t=e.asUnsafe();for(;t.next();)switch(t.tag()){case 1:this.name=t.getString();break;case 3:this.keys.push(t.getString());break;case 4:this.values.push(t.processMessage(r._parseValue));break;case 5:this.extent=t.getUInt32();break;default:t.skip()}}getData(){return this._pbfLayer}static _parseValue(e){for(;e.next();)switch(e.tag()){case 1:return e.getString();case 2:return e.getFloat();case 3:return e.getDouble();case 4:return e.getInt64();case 5:return e.getUInt64();case 6:return e.getSInt64();case 7:return e.getBool();default:e.skip()}return null}}e("e",r)}}}));
