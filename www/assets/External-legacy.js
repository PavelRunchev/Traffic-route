System.register(["./index-legacy.js","./infoFor3D-legacy.js"],(function(t,e){"use strict";var r,s,n,a,i,o;return{setters:[t=>{r=t.a,s=t.at,n=t.X},t=>{a=t.c,i=t.u,o=t.i}],execute:function(){t({A:function(t){return Array.isArray(t)?t:[t]},N:function(t,e){return t instanceof File?a(t,e):i(t.assetMimeType,e)??o(t.assetName,e)},h:function(t,e){if(!t)return!1;const{source:r}=t;return function(t,e){if(Array.isArray(t)){const r=t;return r.length>0&&r.every((t=>h(t,e)))}return h(t,e)}(r,e)},u:function(t){return function(t){return!!t&&(Array.isArray(t)?t.some(f):f(t))}(t?.source)},v:function(t){return!!t.original},y:function(t,e){if(t===e)return!0;const{source:r}=t,{source:s}=e;if(r===s)return!0;if(u(r)&&u(s)){if(r.length!==s.length)return!1;const t=(t,e)=>t.assetName<e.assetName?-1:t.assetName>e.assetName?1:0,e=[...r].sort(t),n=[...s].sort(t);for(let r=0;r<e.length;++r)if(!e[r].equals(n[r]))return!1;return!0}return!1}});class e{constructor(t,e,r){this.assetName=t,this.assetMimeType=e,this.parts=r}equals(t){return this===t||this.assetName===t.assetName&&this.assetMimeType===t.assetMimeType&&r(this.parts,t.parts,((t,e)=>t.equals(e)))}isOnService(t){return this.parts.every((e=>e.isOnService(t)))}makeHash(){let t="";for(const e of this.parts)t+=e.partHash;return t}async toBlob(t){const{parts:e}=this;if(1===e.length)return e[0].toBlob(t);const r=await Promise.all(e.map((e=>e.toBlob(t))));return s(t),new Blob(r)}}function u(t){return!!Array.isArray(t)&&t.every((t=>t instanceof e))}t("i",e),t("o",class{constructor(t,e){this.partUrl=t,this.partHash=e}equals(t){return this===t||this.partUrl===t.partUrl&&this.partHash===t.partHash}isOnService(t){return this.partUrl.startsWith(`${t.path}/assets/`)}async toBlob(t){const{data:e}=await n(this.partUrl,{responseType:"blob"});return s(t),e}});const c=/^(model\/gltf\+json)|(model\/gltf-binary)$/,l=/\.(gltf|glb)/i;function f(t){if(t instanceof File){const{type:e,name:r}=t;return c.test(e)||l.test(r)}return c.test(t.assetMimeType)||l.test(t.assetName)}function h(t,r){return t instanceof e&&t.isOnService(r)}}}}));
