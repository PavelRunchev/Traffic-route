System.register(["./index-legacy.js","./mat3f64-legacy.js","./Mesh-legacy.js","./BufferView-legacy.js","./vec3-legacy.js","./DefaultMaterial_COLOR_GAMMA-legacy.js","./types-legacy.js","./georeference-legacy.js","./resourceUtils-legacy.js","./enums-legacy.js","./imageUtils-legacy2.js","./MeshLocalVertexSpace-legacy.js","./meshVertexSpaceUtils-legacy.js","./earcut-legacy.js","./DoubleArray-legacy.js","./Indices-legacy.js","./deduplicate-legacy.js","./plane-legacy.js","./mat4f64-legacy.js","./quatf64-legacy.js","./triangle-legacy.js","./Util-legacy.js","./ObjectStack-legacy.js","./lineSegment-legacy.js","./basicInterfaces-legacy.js","./VertexAttribute-legacy.js","./External-legacy.js","./infoFor3D-legacy.js","./quat-legacy.js","./computeTranslationToOriginAndRotation-legacy.js"],(function(e,t){"use strict";var n,r,l,o,s,a,u,c,i,f,g,m,p,d,y,x,T,j,h,b,v,w,S,A,B,M,C,E,O,R,_,I,$,L,D,F,V,P,U,q,z,G,N;return{setters:[e=>{n=e.X,r=e.e7,l=e.$,o=e.hK,s=e.hL,a=e.h1,u=e.cu,c=e.cL},e=>{i=e.e},e=>{f=e.l,g=e.m,m=e.a,p=e.h,d=e.c},e=>{y=e.c,x=e.x,T=e.L,j=e.O,h=e.i,b=e.E,v=e.T,w=e.u},e=>{S=e.e,A=e.f,B=e.a,M=e.o},e=>{C=e.n,E=e.l,O=e.o,R=e.f,_=e.r,I=e.a,$=e.b,L=e.c,D=e.d,F=e.e,V=e.g,P=e.h,U=e.i},e=>{q=e.e},e=>{z=e.V},e=>{G=e.r},e=>{N=e.D},null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){function t(e,t){return new e(new ArrayBuffer(t*e.ElementCount*q(e.ElementType)))}function k(e,t){if(null==e)return"-";const n=e.typedBuffer;return`${r(t,n.buffer,(()=>t.size))}/${n.byteOffset}/${n.byteLength}`}function K(e){return null!=e?e.toString():"-"}function Q(e){let n=0;const l={color:!1,tangent:!1,normal:!1,texCoord0:!1},o=new Map,s=new Map,a=[];for(const t of e.parts){const{attributes:{position:e,normal:u,color:c,tangent:i,texCoord0:f}}=t,g=`\n      ${k(e,o)}/\n      ${k(u,o)}/\n      ${k(c,o)}/\n      ${k(i,o)}/\n      ${k(f,o)}/\n      ${K(t.transform)}\n    `;let m=!1;const p=r(s,g,(()=>(m=!0,{start:n,length:e.count})));m&&(n+=e.count),u&&(l.normal=!0),c&&(l.color=!0),i&&(l.tangent=!0),f&&(l.texCoord0=!0),a.push({gltf:t,writeVertices:m,region:p})}return{vertexAttributes:{position:t(v,n),normal:l.normal?t(h,n):null,tangent:l.tangent?t(y,n):null,color:l.color?t(x,n):null,texCoord0:l.texCoord0?t(w,n):null},parts:a,components:[]}}function X(e){return new g({data:(G(e.data),e.data),wrap:Z(e.parameters.wrap)})}function H(e,t){const n=new l(function(e,t){return a(te(e[0]),te(e[1]),te(e[2]),t)}(e.color,e.opacity)),r=e.emissiveFactor?new l(function(e){return u(te(e[0]),te(e[1]),te(e[2]))}(e.emissiveFactor)):null,o=e=>e?new d({scale:e.scale?[e.scale[0],e.scale[1]]:[1,1],rotation:c(e.rotation??0),offset:e.offset?[e.offset[0],e.offset[1]]:[0,0]}):null;return new m({color:n,colorTexture:t.get(e.textureColor),normalTexture:t.get(e.textureNormal),emissiveColor:r,emissiveTexture:t.get(e.textureEmissive),occlusionTexture:t.get(e.textureOcclusion),alphaMode:Y(e.alphaMode),alphaCutoff:e.alphaCutoff,doubleSided:e.doubleSided,metallic:e.metallicFactor,roughness:e.roughnessFactor,metallicRoughnessTexture:t.get(e.textureMetallicRoughness),colorTextureTransform:o(e.colorTextureTransform),normalTextureTransform:o(e.normalTextureTransform),occlusionTextureTransform:o(e.occlusionTextureTransform),emissiveTextureTransform:o(e.emissiveTextureTransform),metallicRoughnessTextureTransform:o(e.metallicRoughnessTextureTransform)})}function J(e,t,n){t.writeVertices&&W(e,t);const{indices:r,attributes:l,primitiveType:o,material:s}=t.gltf;let a=O(r||l.position.count,o);const u=t.region.start;if(u){const e=new Uint32Array(a);for(let t=0;t<a.length;t++)e[t]+=u;a=e}e.components.push(new p({name:t.gltf.name,faces:a,material:n.get(s),shading:l.normal?"source":"flat",trustSourceNormals:!0}))}function W(e,t){const{position:n,normal:r,tangent:l,color:a,texCoord0:u}=e.vertexAttributes,c=t.region.start,{attributes:f,transform:g}=t.gltf,m=f.position.count;if(S(n.slice(c,m),f.position,g),null!=f.normal&&null!=r){const e=o(i(),g),t=r.slice(c,m);A(t,f.normal,e),s(e)&&B(t,t)}else null!=r&&R(r,0,0,1,{dstIndex:c,count:m});if(null!=f.tangent&&null!=l){const e=o(i(),g),t=l.slice(c,m);_(t,f.tangent,e),s(e)&&I(t,t)}else null!=l&&$(l,0,0,1,1,{dstIndex:c,count:m});if(null!=f.texCoord0&&null!=u?L(u.slice(c,m),f.texCoord0):null!=u&&D(u,0,0,{dstIndex:c,count:m}),null!=f.color&&null!=a){const e=f.color,t=a.slice(c,m);if(4===e.elementCount)e instanceof y?F(t,e,255):e instanceof x?V(t,e):e instanceof T&&F(t,e,1/256);else{$(t,255,255,255,255);const n=j.fromTypedArray(t.typedBuffer,t.typedBufferStride);e instanceof h?M(n,e,255):e instanceof j?P(n,e):e instanceof b&&M(n,e,1/256)}}else null!=a&&$(a.slice(c,m),255,255,255,255)}function Y(e){switch(e){case"OPAQUE":return"opaque";case"MASK":return"mask";case"BLEND":return"blend"}}function Z(e){return{horizontal:ee(e.s),vertical:ee(e.t)}}function ee(e){switch(e){case N.CLAMP_TO_EDGE:return"clamp";case N.MIRRORED_REPEAT:return"mirror";case N.REPEAT:return"repeat"}}function te(e){return e**(1/U)*255}e("loadGLTFMesh",(async function(e,t,r){const l=new C(function(e){const t=e?.resolveFile;return t?{busy:!1,request:async(e,r,l)=>{const o=t?.(e)??e,s="image"===r?"image":"binary"===r?"array-buffer":"json";return(await n(o,{responseType:s,signal:null!=l?l.signal:null})).data}}:null}(r)),o=(await E(l,t,r,!0)).model,s=o.lods.shift(),a=new Map,u=new Map;o.textures.forEach(((e,t)=>a.set(t,X(e)))),o.materials.forEach(((e,t)=>u.set(t,H(e,a))));const c=Q(s);for(const n of c.parts)J(c,n,u);const{position:i,normal:g,tangent:m,color:p,texCoord0:d}=c.vertexAttributes,y={position:i.typedBuffer,normal:null!=g?g.typedBuffer:null,tangent:null!=m?m.typedBuffer:null,uv:null!=d?d.typedBuffer:null,color:null!=p?p.typedBuffer:null},x=z(y,e,r);return{transform:x.transform,vertexSpace:x.vertexSpace,components:c.components,spatialReference:e.spatialReference,vertexAttributes:new f({position:x.vertexAttributes.position,normal:x.vertexAttributes.normal,tangent:x.vertexAttributes.tangent,color:y.color,uv:y.uv})}})),Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,l=e.typedBufferStride,o=t.typedBuffer,s=t.typedBufferStride,a=n?n.count:t.count;let u=(n?.dstIndex??0)*l,c=(n?.srcIndex??0)*s;for(let i=0;i<a;++i){for(let e=0;e<9;++e)r[u+e]=o[c+e];u+=l,c+=s}}},Symbol.toStringTag,{value:"Module"})),Object.freeze(Object.defineProperty({__proto__:null,copy:function(e,t,n){const r=e.typedBuffer,l=e.typedBufferStride,o=t.typedBuffer,s=t.typedBufferStride,a=n?n.count:t.count;let u=(n?.dstIndex??0)*l,c=(n?.srcIndex??0)*s;for(let i=0;i<a;++i){for(let e=0;e<16;++e)r[u+e]=o[c+e];u+=l,c+=s}}},Symbol.toStringTag,{value:"Module"}))}}}));
