System.register(["./index-legacy.js","./ObjectStack-legacy.js","./plane-legacy.js"],(function(t,n){"use strict";var e,r,i,o,c,u,s,f,a,g,l,h,d,p,y,M,S,b,j,m,R,x,T,q,w,A,O,P,_,v;return{setters:[t=>{e=t.cp,r=t.gW,i=t.h0,o=t.cQ,c=t.ct,u=t.cR,s=t.cS,f=t.cV,a=t.cU,g=t.gT,l=t.co,h=t.ce,d=t.h1,p=t.w,y=t.cd,M=t.h2,S=t.cq,b=t.h3,j=t.d$,m=t.cT,R=t.h4,x=t.cs,T=t.h5,q=t.eT,w=t.h6,A=t.h7,O=t.gX},t=>{P=t.s},t=>{_=t.c,v=t.f}],execute:function(){function n(t){return t?C(o(t.origin),o(t.direction)):C(c(),c())}function C(t,n){return{origin:t,direction:n}}function E(t,e,r=n()){return u(r.origin,t),s(r.direction,e,t),r}t({I:$,O:z,V:I,Z:N,d:n,p:function(t,n){const e=V.get();return e.origin=t,e.direction=n,e},s:K,w:L});const V=new P((()=>n())),Z=L();function L(){return g()}const X=l,k=l;function z(t,n){return h(n,t)}function I(t){return t[3]}function N(t){return t}function Q(t,n,e){if(null==n)return!1;if(!W(t,n,U))return!1;let{t0:r,t1:i}=U;if((r<0||i<r&&i>0)&&(r=i),r<0)return!1;if(e){const{origin:t,direction:i}=n;e[0]=t[0]+i[0]*r,e[1]=t[1]+i[1]*r,e[2]=t[2]+i[2]*r}return!0}const U={t0:0,t1:0};function W(t,n,e){const{origin:r,direction:i}=n,o=Y;o[0]=r[0]-t[0],o[1]=r[1]-t[1],o[2]=r[2]-t[2];const c=i[0]*i[0]+i[1]*i[1]+i[2]*i[2];if(0===c)return!1;const u=2*(i[0]*o[0]+i[1]*o[1]+i[2]*o[2]),s=u*u-4*c*(o[0]*o[0]+o[1]*o[1]+o[2]*o[2]-t[3]*t[3]);if(s<0)return!1;const f=Math.sqrt(s);return e.t0=(-u-f)/(2*c),e.t1=(-u+f)/(2*c),!0}const Y=c();function $(t,n){return Q(t,n,null)}function B(t,n,o){const c=_.get(),u=v.get();S(c,n.origin,n.direction);const s=I(t);S(o,c,n.origin),a(o,o,1/r(o)*s);const f=F(t,n.origin),g=function(t,n){const o=e(t,n)/(r(t)*r(n));return-i(o)}(n.origin,o);return b(u,g+f,c),j(o,o,u),o}function D(t,n,e){const i=s(_.get(),n,t),o=a(_.get(),i,t[3]/r(i));return f(e,o,t)}function F(t,n){const e=s(_.get(),n,t),o=r(e),c=I(t),u=c+Math.abs(c-o);return i(c/u)}const G=c();function H(t,n,e,r){const i=s(G,n,t);switch(e){case R.X:{const t=T(i,G)[2];return q(r,-Math.sin(t),Math.cos(t),0)}case R.Y:{const t=T(i,G),n=t[1],e=t[2],o=Math.sin(n);return q(r,-o*Math.cos(e),-o*Math.sin(e),Math.cos(n))}case R.Z:return x(r,i);default:return}}function J(t,n){const e=s(tt,n,t);return r(e)-t[3]}function K(t,n){const e=w(t,n),r=I(t);return e<=r*r}const tt=c(),nt=L();Object.freeze(Object.defineProperty({__proto__:null,NullSphere:Z,altitudeAt:J,angleToSilhouette:F,axisAt:H,clear:function(t){t[0]=t[1]=t[2]=t[3]=0},closestPoint:function(t,n,r){return Q(t,n,r)?r:(function(t,n,r){const i=e(t.direction,s(r,n,t.origin));f(r,t.origin,a(r,t.direction,i))}(n,t,r),D(t,r,r))},closestPointOnSilhouette:B,containsPoint:K,copy:z,create:L,distanceToSilhouette:function(t,n){const e=s(_.get(),n,t),r=m(e),i=t[3]*t[3];return Math.sqrt(Math.abs(r-i))},elevate:function(t,n,e){return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2]),e[3]=t[3]+n,e},equals:k,exactEquals:X,fromCenterAndRadius:function(t,n){return d(t[0],t[1],t[2],n)},fromRadius:function(t,n){return t[0]=t[1]=t[2]=0,t[3]=n,t},fromValues:function(t,n,e,r){return d(t,n,e,r)},getCenter:N,getRadius:I,intersectLine:function(t,n,e){const r=E(n,e);if(!W(t,r,U))return[];const{origin:i,direction:o}=r,{t0:u,t1:s}=U,f=n=>{const e=c();return O(e,i,o,n),D(t,e,e)};return Math.abs(u-s)<y()?[f(u)]:[f(u),f(s)]},intersectRay:Q,intersectRayClosestSilhouette:function(t,n,e){if(Q(t,n,e))return e;const i=B(t,n,_.get());return f(e,n.origin,a(_.get(),n.direction,M(n.origin,i)/r(n.direction))),e},intersectsRay:$,projectPoint:D,setAltitudeAt:function(t,n,e,r){const i=J(t,n),o=H(t,n,R.Z,tt),c=a(tt,o,e-i);return f(r,n,c)},setExtent:function(t,n,e){return p.getLogger("esri.geometry.support.sphere").error("sphere.setExtent is not yet supported"),t!==e&&z(t,e),e},tmpSphere:nt,union:function(t,n,e=g()){const r=M(t,n),i=t[3],o=n[3];return r+o<i?(h(e,t),e):r+i<o?(h(e,n),e):(A(e,t,n,(r+o-i)/(2*r)),e[3]=(r+i+o)/2,e)},wrap:function(t){return t}},Symbol.toStringTag,{value:"Module"}))}}}));
